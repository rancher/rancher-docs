<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.5 plugin-docs plugin-id-default docs-doc-id-how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Configure Active Directory (AD) | Rancher</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ranchermanager.docs.rancher.com/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.5"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.5"><meta data-rh="true" name="docsearch:version" content="2.5"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.5"><meta data-rh="true" property="og:title" content="Configure Active Directory (AD) | Rancher"><meta data-rh="true" name="description" content="If your organization uses Microsoft Active Directory as central user repository, you can configure Rancher to communicate with an Active Directory server to authenticate users. This allows Rancher admins to control access to clusters and projects based on users and groups managed externally in the Active Directory, while allowing end-users to authenticate with their AD credentials when logging in to the Rancher UI."><meta data-rh="true" property="og:description" content="If your organization uses Microsoft Active Directory as central user repository, you can configure Rancher to communicate with an Active Directory server to authenticate users. This allows Rancher admins to control access to clusters and projects based on users and groups managed externally in the Active Directory, while allowing end-users to authenticate with their AD credentials when logging in to the Rancher UI."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" hreflang="en"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/zh/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration/authentication-config/configure-active-directory"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Rancher" href="/opensearch.xml">



<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/assets/css/styles.cd075367.css">
<link rel="preload" href="/assets/js/runtime~main.ffa273ad.js" as="script">
<link rel="preload" href="/assets/js/main.7cb2a3c9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.5">v2.5</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/">Latest</a></li><li><a class="dropdown__link" href="/v2.8">v2.8</a></li><li><a class="dropdown__link" href="/v2.7">v2.7</a></li><li><a class="dropdown__link" href="/v2.6">v2.6</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory">v2.5</a></li><li><a class="dropdown__link" href="/v2.0-v2.4/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher__desktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.5">Rancher 2.5</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.5/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/v2.5/how-to-guides">How-to Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;How-to Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/new-user-guides">New User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;New User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides">Advanced User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration">Authentication, Permissions, and Global Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication, Permissions, and Global Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication">About Authentication</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config">Configuring Authentication</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuring Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/manage-users-and-groups">Users and Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/create-local-users">Local Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-google-oauth">Configuring Google OAuth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory">Configure Active Directory (AD)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-freeipa">Configuring FreeIPA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-azure-ad">Configure Azure AD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-github">Configure GitHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-keycloak">Configure Keycloak (SAML)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-pingidentity">Configure PingIdentity (SAML)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-okta-saml">Configure Okta (SAML)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/configure-microsoft-ad-federation-service-saml">Configuring Microsoft AD Federation Service (SAML)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuring Microsoft AD Federation Service (SAML)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/configure-shibboleth-saml">Configuring Shibboleth (SAML)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuring Shibboleth (SAML)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/manage-role-based-access-control-rbac">Managing Role-Based Access Control (RBAC)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing Role-Based Access Control (RBAC)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-provisioning-drivers">About Provisioning Drivers</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Provisioning Drivers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-rke1-templates">About RKE1 Templates</a><button aria-label="Toggle the collapsible sidebar category &#x27;About RKE1 Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/create-pod-security-policies">Creating Pod Security Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/global-default-private-registry">Configuring a Global Default Private Registry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/manage-clusters">Cluster Administration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Administration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/manage-projects">Project Administration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Project Administration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/monitoring-alerting-guides">Monitoring/Alerting Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring/Alerting Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/monitoring-v2-configuration-guides">Monitoring V2 Configuration Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Monitoring V2 Configuration Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/istio-setup-guide">Istio Setup Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Istio Setup Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.5/how-to-guides/advanced-user-guides/cis-scan-guides">CIS Scan Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;CIS Scan Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.5/reference-guides">Reference Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.5/explanations">Explanations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Explanations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.5/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/v2.5/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.5/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Rancher<!-- --> <b>v2.5</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/">latest version</a></b> (<!-- -->Latest<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.5/how-to-guides"><span itemprop="name">How-to Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.5/how-to-guides/advanced-user-guides"><span itemprop="name">Advanced User Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration"><span itemprop="name">Authentication, Permissions, and Global Configuration</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication"><span itemprop="name">About Authentication</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config"><span itemprop="name">Configuring Authentication</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configure Active Directory (AD)</span><meta itemprop="position" content="6"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.5</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configure Active Directory (AD)</h1></header><p>If your organization uses Microsoft Active Directory as central user repository, you can configure Rancher to communicate with an Active Directory server to authenticate users. This allows Rancher admins to control access to clusters and projects based on users and groups managed externally in the Active Directory, while allowing end-users to authenticate with their AD credentials when logging in to the Rancher UI.</p><p>Rancher uses LDAP to communicate with the Active Directory server. The authentication flow for Active Directory is therefore the same as for the <a href="/v2.5/reference-guides/configure-openldap">OpenLDAP authentication</a> integration.</p><blockquote><p><strong>Note:</strong></p><p>Before you start, please familiarise yourself with the concepts of <a href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication#external-authentication-configuration-and-principal-users">External Authentication Configuration and Principal Users</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><p>You&#x27;ll need to create or obtain from your AD administrator a new AD user to use as service account for Rancher. This user must have sufficient permissions to perform LDAP searches and read attributes of users and groups under your AD domain.</p><p>Usually a (non-admin) <strong>Domain User</strong> account should be used for this purpose, as by default such user has read-only privileges for most objects in the domain partition.</p><p>Note however, that in some locked-down Active Directory configurations this default behaviour may not apply. In such case you will need to ensure that the service account user has at least <strong>Read</strong> and <strong>List Content</strong> permissions granted either on the Base OU (enclosing users and groups) or globally for the domain.</p><blockquote><p><strong>Using TLS?</strong></p><p>If the certificate used by the AD server is self-signed or not from a recognised certificate authority, make sure have at hand the CA certificate (concatenated with any intermediate certificates) in PEM format. You will have to paste in this certificate during the configuration so that Rancher is able to validate the certificate chain.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-steps">Configuration Steps<a href="#configuration-steps" class="hash-link" aria-label="Direct link to Configuration Steps" title="Direct link to Configuration Steps">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-active-directory-configuration">Open Active Directory Configuration<a href="#open-active-directory-configuration" class="hash-link" aria-label="Direct link to Open Active Directory Configuration" title="Direct link to Open Active Directory Configuration">​</a></h3><ol><li>Log into the Rancher UI using the initial local <code>admin</code> account.</li><li>From the <strong>Global</strong> view, navigate to <strong>Security</strong> &gt; <strong>Authentication</strong></li><li>Select <strong>Active Directory</strong>. The <strong>Configure an AD server</strong> form will be displayed.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-active-directory-server-settings">Configure Active Directory Server Settings<a href="#configure-active-directory-server-settings" class="hash-link" aria-label="Direct link to Configure Active Directory Server Settings" title="Direct link to Configure Active Directory Server Settings">​</a></h3><p>In the section titled <code>1. Configure an Active Directory server</code>,   complete the fields with the information specific to your Active Directory server. Please refer to the following table for detailed information on the required values for each parameter.</p><blockquote><p><strong>Note:</strong></p><p>If you are unsure about the correct values to enter in the  user/group Search Base field, please refer to <a href="#annex-identify-search-base-and-schema-using-ldapsearch">Identify Search Base and Schema using ldapsearch</a>.</p></blockquote><p><strong>Table 1: AD Server parameters</strong></p><table><thead><tr><th align="left">Parameter</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">Hostname</td><td align="left">Specify the hostname or IP address of the AD server</td></tr><tr><td align="left">Port</td><td align="left">Specify the port at which the Active Directory server is listening for connections. Unencrypted LDAP normally uses the standard port of 389, while LDAPS uses port 636.</td></tr><tr><td align="left">TLS</td><td align="left">Check this box to enable LDAP over SSL/TLS (commonly known as LDAPS).</td></tr><tr><td align="left">Server Connection Timeout</td><td align="left">The duration in number of seconds that Rancher waits before considering the AD server unreachable.</td></tr><tr><td align="left">Service Account Username</td><td align="left">Enter the username of an AD account with read-only access to your domain partition (see <a href="#prerequisites">Prerequisites</a>). The username can be entered in NetBIOS format (e.g. &quot;DOMAIN\serviceaccount&quot;) or UPN format (e.g. &quot;<a href="mailto:serviceaccount@domain.com" target="_blank" rel="noopener noreferrer">serviceaccount@domain.com</a>&quot;).</td></tr><tr><td align="left">Service Account Password</td><td align="left">The password for the service account.</td></tr><tr><td align="left">Default Login Domain</td><td align="left">When you configure this field with the NetBIOS name of your AD domain, usernames entered without a domain (e.g. &quot;jdoe&quot;) will automatically be converted to a slashed,  NetBIOS logon (e.g. &quot;LOGIN_DOMAIN\jdoe&quot;) when binding to the AD server. If your users authenticate with the UPN (e.g. &quot;<a href="mailto:jdoe@acme.com" target="_blank" rel="noopener noreferrer">jdoe@acme.com</a>&quot;) as username then this field <strong>must</strong> be left empty.</td></tr><tr><td align="left">User Search Base</td><td align="left">The Distinguished Name of the node in your directory tree from which to start searching for user objects. All users must be descendents of this base DN. For example: &quot;ou=people,dc=acme,dc=com&quot;.</td></tr><tr><td align="left">Group Search Base</td><td align="left">If your groups live under a different node than the one configured under <code>User Search Base</code> you will need to provide the Distinguished Name here. Otherwise leave it empty. For example: &quot;ou=groups,dc=acme,dc=com&quot;.</td></tr></tbody></table><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-usergroup-schema">Configure User/Group Schema<a href="#configure-usergroup-schema" class="hash-link" aria-label="Direct link to Configure User/Group Schema" title="Direct link to Configure User/Group Schema">​</a></h3><p>In the section titled <code>2. Customize Schema</code> you must provide Rancher with a correct mapping of user and group attributes corresponding to the schema used in your directory.</p><p>Rancher uses LDAP queries to search for and retrieve information about users and groups within the Active Directory. The attribute mappings configured in this section are used to construct search filters and resolve group membership. It is therefore paramount that the provided settings reflect the reality of your AD domain.</p><blockquote><p><strong>Note:</strong></p><p>If you are unfamiliar with the schema used in your Active Directory domain, please refer to <a href="#annex-identify-search-base-and-schema-using-ldapsearch">Identify Search Base and Schema using ldapsearch</a> to determine the correct configuration values.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="user-schema">User Schema<a href="#user-schema" class="hash-link" aria-label="Direct link to User Schema" title="Direct link to User Schema">​</a></h4><p>The table below details the parameters for the user schema section configuration.</p><p><strong>Table 2: User schema configuration parameters</strong></p><table><thead><tr><th align="left">Parameter</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">Object Class</td><td align="left">The name of the object class used for user objects in your domain. If defined, only specify the name of the object class - <em>don&#x27;t</em> include it in an LDAP wrapper such as &amp;(objectClass=xxxx)</td></tr><tr><td align="left">Username Attribute</td><td align="left">The user attribute whose value is suitable as a display name.</td></tr><tr><td align="left">Login Attribute</td><td align="left">The attribute whose value matches the username part of credentials entered by your users when logging in to Rancher. If your users authenticate with their UPN (e.g. &quot;<a href="mailto:jdoe@acme.com" target="_blank" rel="noopener noreferrer">jdoe@acme.com</a>&quot;) as username then this field must normally be set to <code>userPrincipalName</code>. Otherwise for the old, NetBIOS-style logon names (e.g. &quot;jdoe&quot;) it&#x27;s usually <code>sAMAccountName</code>.</td></tr><tr><td align="left">User Member Attribute</td><td align="left">The attribute containing the groups that a user is a member of.</td></tr><tr><td align="left">Search Attribute</td><td align="left">When a user enters text to add users or groups in the UI, Rancher queries the AD server and attempts to match users by the attributes provided in this setting. Multiple attributes can be specified by separating them with the pipe (&quot;<!-- -->|<!-- -->&quot;) symbol. To match UPN usernames (e.g. <a href="mailto:jdoe@acme.com" target="_blank" rel="noopener noreferrer">jdoe@acme.com</a>) you should usually set the value of this field to <code>userPrincipalName</code>.</td></tr><tr><td align="left">Search Filter</td><td align="left">This filter gets applied to the list of users that is searched when Rancher attempts to add users to a site access list or tries to add members to clusters or projects. For example, a user search filter could be <code>(<!-- -->|<!-- -->(memberOf=CN=group1,CN=Users,DC=testad,DC=rancher,DC=io)(memberOf=CN=group2,CN=Users,DC=testad,DC=rancher,DC=io))</code>. Note: If the search filter does not use <a href="https://docs.microsoft.com/en-us/windows/win32/adsi/search-filter-syntax" target="_blank" rel="noopener noreferrer">valid AD search syntax,</a> the list of users will be empty.</td></tr><tr><td align="left">User Enabled Attribute</td><td align="left">The attribute containing an integer value representing a bitwise enumeration of user account flags. Rancher uses this to determine if a user account is disabled. You should normally leave this set to the AD standard <code>userAccountControl</code>.</td></tr><tr><td align="left">Disabled Status Bitmask</td><td align="left">This is the value of the <code>User Enabled Attribute</code> designating a disabled user account. You should normally leave this set to the default value of &quot;2&quot; as specified in the Microsoft Active Directory schema (see <a href="https://docs.microsoft.com/en-us/windows/desktop/adschema/a-useraccountcontrol#remarks" target="_blank" rel="noopener noreferrer">here</a>).</td></tr></tbody></table><hr><h4 class="anchor anchorWithStickyNavbar_LWe7" id="group-schema">Group Schema<a href="#group-schema" class="hash-link" aria-label="Direct link to Group Schema" title="Direct link to Group Schema">​</a></h4><p>The table below details the parameters for the group schema configuration.</p><p><strong>Table 3: Group schema configuration parameters</strong></p><table><thead><tr><th align="left">Parameter</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">Object Class</td><td align="left">The name of the object class used for group objects in your domain. If defined, only specify the name of the object class - <em>don&#x27;t</em> include it in an LDAP wrapper such as &amp;(objectClass=xxxx)</td></tr><tr><td align="left">Name Attribute</td><td align="left">The group attribute whose value is suitable for a display name.</td></tr><tr><td align="left">Group Member User Attribute</td><td align="left">The name of the <strong>user attribute</strong> whose format matches the group members in the <code>Group Member Mapping Attribute</code>.</td></tr><tr><td align="left">Group Member Mapping Attribute</td><td align="left">The name of the group attribute containing the members of a group.</td></tr><tr><td align="left">Search Attribute</td><td align="left">Attribute used to construct search filters when adding groups to clusters or projects. See description of user schema <code>Search Attribute</code>.</td></tr><tr><td align="left">Search Filter</td><td align="left">This filter gets applied to the list of groups that is searched when Rancher attempts to add groups to a site access list or tries to add groups to clusters or projects. For example, a group search filter could be <code>(<!-- -->|<!-- -->(cn=group1)(cn=group2))</code>. Note: If the search filter does not use <a href="https://docs.microsoft.com/en-us/windows/win32/adsi/search-filter-syntax" target="_blank" rel="noopener noreferrer">valid AD search syntax,</a> the list of groups will be empty.</td></tr><tr><td align="left">Group DN Attribute</td><td align="left">The name of the group attribute whose format matches the values in the user attribute describing a the user&#x27;s memberships. See  <code>User Member Attribute</code>.</td></tr><tr><td align="left">Nested Group Membership</td><td align="left">This settings defines whether Rancher should resolve nested group memberships. Use only if your organization makes use of these nested memberships (i.e., you have groups that contain other groups as members. We advise avoiding nested groups when possible).</td></tr></tbody></table><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-authentication">Test Authentication<a href="#test-authentication" class="hash-link" aria-label="Direct link to Test Authentication" title="Direct link to Test Authentication">​</a></h3><p>Once you have completed the configuration, proceed by testing the connection to the AD server <strong>using your AD admin account</strong>. If the test is successful, authentication with the configured Active Directory will be enabled implicitly with the account you test with set as admin.</p><blockquote><p><strong>Note:</strong></p><p>The AD user pertaining to the credentials entered in this step will be mapped to the local principal account and assigned administrator privileges in Rancher. You should therefore make a conscious decision on which AD account you use to perform this step.</p></blockquote><ol><li>Enter the <strong>username</strong> and <strong>password</strong> for the AD account that should be mapped to the local principal account.</li><li>Click <strong>Authenticate with Active Directory</strong> to finalise the setup.</li></ol><p><strong>Result:</strong></p><ul><li>Active Directory authentication has been enabled.</li><li>You have been signed into Rancher as administrator using the provided AD credentials.</li></ul><blockquote><p><strong>Note:</strong></p><p>You will still be able to login using the locally configured <code>admin</code> account and password in case of a disruption of LDAP services.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="annex-identify-search-base-and-schema-using-ldapsearch">Annex: Identify Search Base and Schema using ldapsearch<a href="#annex-identify-search-base-and-schema-using-ldapsearch" class="hash-link" aria-label="Direct link to Annex: Identify Search Base and Schema using ldapsearch" title="Direct link to Annex: Identify Search Base and Schema using ldapsearch">​</a></h2><p>In order to successfully configure AD authentication it is crucial that you provide the correct configuration pertaining to the hierarchy and schema of your AD server.</p><p>The <a href="https://manpages.ubuntu.com/manpages/focal/en/man1/ldapsearch.1.html" target="_blank" rel="noopener noreferrer"><code>ldapsearch</code></a> tool allows you to query your AD server to learn about the schema used for user and group objects.</p><p>For the purpose of the example commands provided below we will assume:</p><ul><li>The Active Directory server has a hostname of <code>ad.acme.com</code></li><li>The server is listening for unencrypted connections on port <code>389</code></li><li>The Active Directory domain is <code>acme</code></li><li>You have a valid AD account with the username <code>jdoe</code> and password <code>secret</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="identify-search-base">Identify Search Base<a href="#identify-search-base" class="hash-link" aria-label="Direct link to Identify Search Base" title="Direct link to Identify Search Base">​</a></h3><p>First we will use <code>ldapsearch</code> to identify the Distinguished Name (DN) of the parent node(s) for users and groups:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ ldapsearch -x -D &quot;acme\jdoe&quot; -w &quot;secret&quot; -p 389 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-h ad.acme.com -b &quot;dc=acme,dc=com&quot; -s sub &quot;sAMAccountName=jdoe&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command performs an LDAP search with the search base set to the domain root (<code>-b &quot;dc=acme,dc=com&quot;</code>) and a filter targeting the user account (<code>sAMAccountNam=jdoe</code>), returning the attributes for said user:</p><p><img loading="lazy" src="/assets/images/ldapsearch-user-65e5a8ef30c2753904db1bdd42c20d2a.png" width="500" height="287" class="img_ev3q"></p><p>Since in this case the user&#x27;s DN is <code>CN=John Doe,CN=Users,DC=acme,DC=com</code> <!-- -->[5]<!-- -->, we should configure the <strong>User Search Base</strong> with the parent node DN <code>CN=Users,DC=acme,DC=com</code>.</p><p>Similarly, based on the DN of the group referenced in the <strong>memberOf</strong> attribute <!-- -->[4]<!-- -->, the correct value for the <strong>Group Search Base</strong> would be the parent node of that value, i.e., <code>OU=Groups,DC=acme,DC=com</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="identify-user-schema">Identify User Schema<a href="#identify-user-schema" class="hash-link" aria-label="Direct link to Identify User Schema" title="Direct link to Identify User Schema">​</a></h3><p>The output of the above <code>ldapsearch</code> query also allows to determine the correct values to use in the user schema configuration:</p><ul><li><code>Object Class</code>: <strong>person</strong> <!-- -->[1]</li><li><code>Username Attribute</code>: <strong>name</strong> <!-- -->[2]</li><li><code>Login Attribute</code>: <strong>sAMAccountName</strong> <!-- -->[3]</li><li><code>User Member Attribute</code>: <strong>memberOf</strong> <!-- -->[4]</li></ul><blockquote><p><strong>Note:</strong></p><p>If the AD users in our organization were to authenticate with their UPN (e.g. <a href="mailto:jdoe@acme.com" target="_blank" rel="noopener noreferrer">jdoe@acme.com</a>) instead of the short logon name, then we would have to set the <code>Login Attribute</code> to <strong>userPrincipalName</strong> instead.</p></blockquote><p>We&#x27;ll also set the <code>Search Attribute</code> parameter to <strong>sAMAccountName|name</strong>. That way users can be added to clusters/projects in the Rancher UI either by entering their username or full name.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="identify-group-schema">Identify Group Schema<a href="#identify-group-schema" class="hash-link" aria-label="Direct link to Identify Group Schema" title="Direct link to Identify Group Schema">​</a></h3><p>Next, we&#x27;ll query one of the groups associated with this user, in this case <code>CN=examplegroup,OU=Groups,DC=acme,DC=com</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ ldapsearch -x -D &quot;acme\jdoe&quot; -w &quot;secret&quot; -p 389 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-h ad.acme.com -b &quot;ou=groups,dc=acme,dc=com&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-s sub &quot;CN=examplegroup&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will inform us on the attributes used for group objects:</p><p><img loading="lazy" src="/assets/images/ldapsearch-group-5add611aa83e6ba6a6865fa1d90cc1d3.png" width="500" height="295" class="img_ev3q"></p><p>Again, this allows us to determine the correct values to enter in the group schema configuration:</p><ul><li><code>Object Class</code>: <strong>group</strong> <!-- -->[1]</li><li><code>Name Attribute</code>: <strong>name</strong> <!-- -->[2]</li><li><code>Group Member Mapping Attribute</code>: <strong>member</strong> <!-- -->[3]</li><li><code>Search Attribute</code>: <strong>sAMAccountName</strong> <!-- -->[4]</li></ul><p>Looking  at the value of the  <strong>member</strong> attribute, we can see that it contains the DN of the referenced user. This  corresponds to the <strong>distinguishedName</strong> attribute in our user object. Accordingly will have to set the value of the <code>Group Member User Attribute</code> parameter to this attribute.</p><p>In the same way, we can observe that the value in the <strong>memberOf</strong> attribute in the user object corresponds to the <strong>distinguishedName</strong> <!-- -->[5]<!-- --> of the group. We therefore need to set the value for the <code>Group DN Attribute</code> parameter to this attribute.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="annex-troubleshooting">Annex: Troubleshooting<a href="#annex-troubleshooting" class="hash-link" aria-label="Direct link to Annex: Troubleshooting" title="Direct link to Annex: Troubleshooting">​</a></h2><p>If you are experiencing issues while testing the connection to the Active Directory server, first double-check the credentials entered for the service account as well as the search base configuration. You may also inspect the Rancher logs to help pinpointing the problem cause. Debug logs may contain more detailed information about the error. Please refer to <a href="/v2.5/faq/technical-items#how-can-i-enable-debug-logging">How can I enable debug logging</a> in this documentation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-active-directory.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-01-12T00:36:20.000Z">Jan 12, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-google-oauth"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuring Google OAuth</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.5/how-to-guides/advanced-user-guides/authentication-permissions-and-global-configuration/about-authentication/authentication-config/configure-freeipa"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuring FreeIPA</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#configuration-steps" class="table-of-contents__link toc-highlight">Configuration Steps</a><ul><li><a href="#open-active-directory-configuration" class="table-of-contents__link toc-highlight">Open Active Directory Configuration</a></li><li><a href="#configure-active-directory-server-settings" class="table-of-contents__link toc-highlight">Configure Active Directory Server Settings</a></li><li><a href="#configure-usergroup-schema" class="table-of-contents__link toc-highlight">Configure User/Group Schema</a></li><li><a href="#test-authentication" class="table-of-contents__link toc-highlight">Test Authentication</a></li></ul></li><li><a href="#annex-identify-search-base-and-schema-using-ldapsearch" class="table-of-contents__link toc-highlight">Annex: Identify Search Base and Schema using ldapsearch</a><ul><li><a href="#identify-search-base" class="table-of-contents__link toc-highlight">Identify Search Base</a></li><li><a href="#identify-user-schema" class="table-of-contents__link toc-highlight">Identify User Schema</a></li><li><a href="#identify-group-schema" class="table-of-contents__link toc-highlight">Identify Group Schema</a></li></ul></li><li><a href="#annex-troubleshooting" class="table-of-contents__link toc-highlight">Annex: Troubleshooting</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ffa273ad.js"></script>
<script src="/assets/js/main.7cb2a3c9.js"></script>
</body>
</html>