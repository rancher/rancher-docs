<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-reference-guides/pipelines/pipeline-configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Pipeline Configuration Reference | Rancher</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="Pipeline Configuration Reference | Rancher"><meta data-rh="true" name="description" content="In this section, you&#x27;ll learn how to configure pipelines."><meta data-rh="true" property="og:description" content="In this section, you&#x27;ll learn how to configure pipelines."><link data-rh="true" rel="icon" href="/zh/img/favicon.png"><link data-rh="true" rel="canonical" href="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Rancher" href="/zh/opensearch.xml">



<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/zh/assets/css/styles.539b57ae.css">
<link rel="preload" href="/zh/assets/js/runtime~main.774ea973.js" as="script">
<link rel="preload" href="/zh/assets/js/main.076ccf8a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/">Latest</a></li><li><a class="dropdown__link" href="/zh/v2.8">v2.8</a></li><li><a class="dropdown__link" href="/zh/v2.7">v2.7</a></li><li><a class="dropdown__link" href="/zh/v2.6/reference-guides/pipelines/pipeline-configuration">v2.6</a></li><li><a class="dropdown__link" href="/zh/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/zh/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher__desktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="打开/收起侧边栏菜单「Getting Started」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="打开/收起侧边栏菜单「How-to Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/zh/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="打开/收起侧边栏菜单「Reference Guides」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/best-practices">Best Practice Guides</a><button aria-label="打开/收起侧边栏菜单「Best Practice Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/rancher-manager-architecture">Rancher Architecture</a><button aria-label="打开/收起侧边栏菜单「Rancher Architecture」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/cluster-configuration">Cluster Configuration</a><button aria-label="打开/收起侧边栏菜单「Cluster Configuration」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/single-node-rancher-in-docker">Single-Node Rancher in Docker</a><button aria-label="打开/收起侧边栏菜单「Single-Node Rancher in Docker」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/installation-references">Installation References</a><button aria-label="打开/收起侧边栏菜单「Installation References」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/installation-references/amazon-eks-permissions">Creating an EKS Cluster</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/configure-openldap">Configuring OpenLDAP</a><button aria-label="打开/收起侧边栏菜单「Configuring OpenLDAP」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/kubernetes-concepts">Kubernetes Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/user-settings">User Settings</a><button aria-label="打开/收起侧边栏菜单「User Settings」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/cli-with-rancher">CLI with Rancher</a><button aria-label="打开/收起侧边栏菜单「CLI with Rancher」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/about-the-api">About the API</a><button aria-label="打开/收起侧边栏菜单「About the API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/rancher-cluster-tools">Tools for Logging, Monitoring, and More</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/rancher-project-tools">Project Tools</a><button aria-label="打开/收起侧边栏菜单「Project Tools」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/system-tools">System Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/rke1-template-example-yaml">RKE1 Example YAML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines">Pipelines</a><button aria-label="打开/收起侧边栏菜单「Pipelines」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/concepts">Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/pipeline-configuration">Pipeline Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/configure-persistent-data">Configuring Persistent Data for Pipeline Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/example-repositories">Example Repositories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/example-yaml">Example YAML File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/pipelines/v2.0.x">v2.0.x Pipeline Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/rancher-security">Rancher Security Guides</a><button aria-label="打开/收起侧边栏菜单「Rancher Security Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/reference-guides/v1.6-migration/migration-tools-cli-reference">Migration Tools CLI Reference</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/explanations">Explanations</a><button aria-label="打开/收起侧边栏菜单「Explanations」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/faq">FAQ</a><button aria-label="打开/收起侧边栏菜单「FAQ」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="打开/收起侧边栏菜单「Troubleshooting」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Rancher<!-- --> <b>v2.0-v2.4</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅<b><a href="/zh/">最新版本</a></b> (<!-- -->Latest<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/reference-guides"><span itemprop="name">Reference Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/reference-guides/pipelines"><span itemprop="name">Pipelines</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Pipeline Configuration Reference</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Pipeline Configuration Reference</h1></header><p>In this section, you&#x27;ll learn how to configure pipelines.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-types">Step Types<a href="#step-types" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Within each stage, you can add as many steps as you&#x27;d like. When there are multiple steps in one stage, they run concurrently.</p><p>Step types include:</p><ul><li><a href="#step-type-run-script">Run Script</a></li><li><a href="#step-type-build-and-publish-images">Build and Publish Images</a></li><li><a href="#step-type-publish-catalog-template">Publish Catalog Template</a></li><li><a href="#step-type-deploy-yaml">Deploy YAML</a></li><li><a href="#step-type-deploy-catalog-app">Deploy Catalog App</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-steps-by-ui">Configuring Steps By UI<a href="#configuring-steps-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>If you haven&#x27;t added any stages, click <strong>Configure pipeline for this branch</strong> to configure the pipeline through the UI.</p><ol><li><p>Add stages to your pipeline execution by clicking <strong>Add Stage</strong>.</p><ol><li>Enter a <strong>Name</strong> for each stage of your pipeline.</li><li>For each stage, you can configure <a href="#triggers-and-trigger-rules">trigger rules</a> by clicking on <strong>Show Advanced Options</strong>. Note: this can always be updated at a later time.</li></ol></li><li><p>After you&#x27;ve created a stage, start <a href="#step-types">adding steps</a> by clicking <strong>Add a Step</strong>. You can add multiple steps to each stage.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-steps-by-yaml">Configuring Steps by YAML<a href="#configuring-steps-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>For each stage, you can add multiple steps. Read more about each <a href="#step-types">step type</a> and the advanced options to get all the details on how to configure the YAML. This is only a small example of how to have multiple stages with a singular step in each stage.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Conditions for stages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">when</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">branch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pull_request </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Multiple steps run concurrently</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> date </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">R</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Publish my image</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">publishImageConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">dockerfilePath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./Dockerfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">buildContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> rancher/rancher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">v2.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally push to remote registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">pushRemote</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">registry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> reg.example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-type-run-script">Step Type: Run Script<a href="#step-type-run-script" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>The <strong>Run Script</strong> step executes arbitrary commands in the workspace inside a specified container. You can use it to build, test and do more, given whatever utilities the base image provides. For your convenience, you can use variables to refer to metadata of a pipeline execution. Please refer to the <a href="#pipeline-variable-substitution-reference">pipeline variable substitution reference</a> for the list of available variables.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-script-by-ui">Configuring Script by UI<a href="#configuring-script-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Step Type</strong> drop-down, choose <strong>Run Script</strong> and fill in the form.</p></li><li><p>Click <strong>Add</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-script-by-yaml">Configuring Script by YAML<a href="#configuring-script-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> golang</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> go build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-type-build-and-publish-images">Step Type: Build and Publish Images<a href="#step-type-build-and-publish-images" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><em>Available as of Rancher v2.1.0</em></p><p>The <strong>Build and Publish Image</strong> step builds and publishes a Docker image. This process requires a Dockerfile in your source code&#x27;s repository to complete successfully.</p><p>The option to publish an image to an insecure registry is not exposed in the UI, but you can specify an environment variable in the YAML that allows you to publish an image insecurely.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-building-and-publishing-images-by-ui">Configuring Building and Publishing Images by UI<a href="#configuring-building-and-publishing-images-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Step Type</strong> drop-down, choose <strong>Build and Publish</strong>.</p></li><li><p>Fill in the rest of the form. Descriptions for each field are listed below. When you&#x27;re done, click <strong>Add</strong>.</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Dockerfile Path</td><td>The relative path to the Dockerfile in the source code repo. By default, this path is <code>./Dockerfile</code>, which assumes the Dockerfile is in the root directory. You can set it to other paths in different use cases (<code>./path/to/myDockerfile</code> for example).</td></tr><tr><td>Image Name</td><td>The image name in <code>name:tag</code> format. The registry address is not required. For example, to build  <code>example.com/repo/my-image:dev</code>, enter <code>repo/my-image:dev</code>.</td></tr><tr><td>Push image to remote repository</td><td>An option to set the registry that publishes the image that&#x27;s built.  To use this option, enable it and choose a registry from the drop-down. If this option is disabled, the image is pushed to the internal registry.</td></tr><tr><td>Build Context <br><br> (<strong>Show advanced options</strong>)</td><td>By default, the root directory of the source code (<code>.</code>). For more details, see the Docker <a href="https://docs.docker.com/engine/reference/commandline/build/" target="_blank" rel="noopener noreferrer">build command documentation</a>.</td></tr></tbody></table></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-building-and-publishing-images-by-yaml">Configuring Building and Publishing Images by YAML<a href="#configuring-building-and-publishing-images-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>You can use specific arguments for Docker daemon and the build. They are not exposed in the UI, but they are available in pipeline YAML format, as indicated in the example below. Available environment variables include:</p><table><thead><tr><th>Variable Name</th><th>Description</th></tr></thead><tbody><tr><td>PLUGIN_DRY_RUN</td><td>Disable docker push</td></tr><tr><td>PLUGIN_DEBUG</td><td>Docker daemon executes in debug mode</td></tr><tr><td>PLUGIN_MIRROR</td><td>Docker daemon registry mirror</td></tr><tr><td>PLUGIN_INSECURE</td><td>Docker daemon allows insecure registries</td></tr><tr><td>PLUGIN_BUILD_ARGS</td><td>Docker build args, a comma separated list</td></tr></tbody></table><br><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This example shows an environment variable being used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># in the Publish Image step. This variable allows you to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># publish an image to an insecure registry:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Publish Image</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">publishImageConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">dockerfilePath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./Dockerfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">buildContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> repo/app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">pushRemote</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">registry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">PLUGIN_INSECURE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-type-publish-catalog-template">Step Type: Publish Catalog Template<a href="#step-type-publish-catalog-template" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><em>Available as of v2.2.0</em></p><p>The <strong>Publish Catalog Template</strong> step publishes a version of a catalog app template (i.e. Helm chart) to a <a href="/zh/v2.0-v2.4/how-to-guides/new-user-guides/helm-charts-in-rancher/creating-apps">git hosted chart repository</a>. It generates a git commit and pushes it to your chart repository. This process requires a chart folder in your source code&#x27;s repository and a pre-configured secret in the dedicated pipeline namespace to complete successfully. Any variables in the <a href="#pipeline-variable-substitution-reference">pipeline variable substitution reference</a> is supported for any file in the chart folder.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-publishing-a-catalog-template-by-ui">Configuring Publishing a Catalog Template by UI<a href="#configuring-publishing-a-catalog-template-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Step Type</strong> drop-down, choose <strong>Publish Catalog Template</strong>.</p></li><li><p>Fill in the rest of the form. Descriptions for each field are listed below. When you&#x27;re done, click <strong>Add</strong>.</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Chart Folder</td><td>The relative path to the chart folder in the source code repo, where the <code>Chart.yaml</code> file is located.</td></tr><tr><td>Catalog Template Name</td><td>The name of the template. For example, wordpress.</td></tr><tr><td>Catalog Template Version</td><td>The version of the template you want to publish, it should be consistent with the version defined in the <code>Chart.yaml</code> file.</td></tr><tr><td>Protocol</td><td>You can choose to publish via HTTP(S) or SSH protocol.</td></tr><tr><td>Secret</td><td>The secret that stores your Git credentials. You need to create a secret in dedicated pipeline namespace in the project before adding this step. If you use HTTP(S) protocol, store Git username and password in <code>USERNAME</code> and <code>PASSWORD</code> key of the secret. If you use SSH protocol, store Git deploy key in <code>DEPLOY_KEY</code> key of the secret. After the secret is created, select it in this option.</td></tr><tr><td>Git URL</td><td>The Git URL of the chart repository that the template will be published to.</td></tr><tr><td>Git Branch</td><td>The Git branch of the chart repository that the template will be published to.</td></tr><tr><td>Author Name</td><td>The author name used in the commit message.</td></tr><tr><td>Author Email</td><td>The author email used in the commit message.</td></tr></tbody></table></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-publishing-a-catalog-template-by-yaml">Configuring Publishing a Catalog Template by YAML<a href="#configuring-publishing-a-catalog-template-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>You can add <strong>Publish Catalog Template</strong> steps directly in the <code>.rancher-pipeline.yml</code> file.</p><p>Under the <code>steps</code> section, add a step with <code>publishCatalogConfig</code>. You will provide the following information:</p><ul><li>Path: The relative path to the chart folder in the source code repo, where the <code>Chart.yaml</code> file is located.</li><li>CatalogTemplate: The name of the template.</li><li>Version: The version of the template you want to publish, it should be consistent with the version defined in the <code>Chart.yaml</code> file.</li><li>GitUrl: The git URL of the chart repository that the template will be published to.</li><li>GitBranch: The git branch of the chart repository that the template will be published to.</li><li>GitAuthor: The author name used in the commit message.</li><li>GitEmail: The author email used in the commit message.</li><li>Credentials: You should provide Git credentials by referencing secrets in dedicated pipeline namespace. If you publish via SSH protocol, inject your deploy key to the <code>DEPLOY_KEY</code> environment variable. If you publish via HTTP(S) protocol, inject your username and password to <code>USERNAME</code> and <code>PASSWORD</code> environment variables.</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Publish Wordpress Template</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">publishCatalogConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./charts/wordpress/latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">catalogTemplate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> wordpress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">CICD_GIT_TAG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">gitUrl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> git@github.com</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">myrepo/charts.git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">gitBranch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">gitAuthor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">gitEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> user@example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">envFrom</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">sourceName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> publish</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">keys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">sourceKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> DEPLOY_KEY</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-type-deploy-yaml">Step Type: Deploy YAML<a href="#step-type-deploy-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>This step deploys arbitrary Kubernetes resources to the project. This deployment requires a Kubernetes manifest file to be present in the source code repository. Pipeline variable substitution is supported in the manifest file. You can view an example file at <a href="https://github.com/rancher/pipeline-example-go/blob/master/deployment.yaml" target="_blank" rel="noopener noreferrer">GitHub</a>. Please refer to the <a href="#pipeline-variable-substitution-reference">pipeline variable substitution reference</a> for the list of available variables.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-deploying-yaml-by-ui">Configure Deploying YAML by UI<a href="#configure-deploying-yaml-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Step Type</strong> drop-down, choose <strong>Deploy YAML</strong> and fill in the form.</p></li><li><p>Enter the <strong>YAML Path</strong>, which is the path to the manifest file in the source code.</p></li><li><p>Click <strong>Add</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-deploying-yaml-by-yaml">Configure Deploying YAML by YAML<a href="#configure-deploying-yaml-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deploy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">applyYamlConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./deployment.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-type-deploy-catalog-app">Step Type :Deploy Catalog App<a href="#step-type-deploy-catalog-app" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><em>Available as of v2.2.0</em></p><p>The <strong>Deploy Catalog App</strong> step deploys a catalog app in the project. It will install a new app if it is not present, or upgrade an existing one.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-deploying-catalog-app-by-ui">Configure Deploying Catalog App by UI<a href="#configure-deploying-catalog-app-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Step Type</strong> drop-down, choose <strong>Deploy Catalog App</strong>.</p></li><li><p>Fill in the rest of the form. Descriptions for each field are listed below. When you&#x27;re done, click <strong>Add</strong>.</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Catalog</td><td>The catalog from which the app template will be used.</td></tr><tr><td>Template Name</td><td>The name of the app template. For example, wordpress.</td></tr><tr><td>Template Version</td><td>The version of the app template you want to deploy.</td></tr><tr><td>Namespace</td><td>The target namespace where you want to deploy the app.</td></tr><tr><td>App Name</td><td>The name of the app you want to deploy.</td></tr><tr><td>Answers</td><td>Key-value pairs of answers used to deploy the app.</td></tr></tbody></table></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-deploying-catalog-app-by-yaml">Configure Deploying Catalog App by YAML<a href="#configure-deploying-catalog-app-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>You can add <strong>Deploy Catalog App</strong> steps directly in the <code>.rancher-pipeline.yml</code> file.</p><p>Under the <code>steps</code> section, add a step with <code>applyAppConfig</code>. You will provide the following information:</p><ul><li>CatalogTemplate: The ID of the template. This can be found by clicking <code>Launch app</code> and selecting <code>View details</code> for the app. It is the last part of the URL.</li><li>Version: The version of the template you want to deploy.</li><li>Answers: Key-value pairs of answers used to deploy the app.</li><li>Name: The name of the app you want to deploy.</li><li>TargetNamespace: The target namespace where you want to deploy the app.</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deploy App</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">applyAppConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">catalogTemplate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cattle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">global</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">library</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">mysql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 0.3.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">answers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">persistence.enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> testmysql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">targetNamespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeouts">Timeouts<a href="#timeouts" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>By default, each pipeline execution has a timeout of 60 minutes. If the pipeline execution cannot complete within its timeout period, the pipeline is aborted.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-timeouts-by-ui">Configuring Timeouts by UI<a href="#configuring-timeouts-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Enter a new value in the <strong>Timeout</strong> field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-timeouts-by-yaml">Configuring Timeouts by YAML<a href="#configuring-timeouts-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>In the <code>timeout</code> section, enter the timeout value in minutes.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># timeout in minutes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">timeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notifications">Notifications<a href="#notifications" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>You can enable notifications to any <a href="/zh/v2.0-v2.4/explanations/integrations-in-rancher/notifiers">notifiers</a> based on the build status of a pipeline. Before enabling notifications, Rancher recommends <a href="/zh/v2.0-v2.4/explanations/integrations-in-rancher/notifiers">setting up notifiers</a> so it will be easy to add recipients immediately.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-notifications-by-ui">Configuring Notifications by UI<a href="#configuring-notifications-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><em>Available as of v2.2.0</em></p><ol><li><p>Within the <strong>Notification</strong> section, turn on notifications by clicking <strong>Enable</strong>.</p></li><li><p>Select the conditions for the notification. You can select to get a notification for the following statuses: <code>Failed</code>, <code>Success</code>, <code>Changed</code>. For example, if you want to receive notifications when an execution fails, select <strong>Failed</strong>.</p></li><li><p>If you don&#x27;t have any existing <a href="/zh/v2.0-v2.4/explanations/integrations-in-rancher/notifiers">notifiers</a>, Rancher will provide a warning that no notifiers are set up and provide a link to be able to go to the notifiers page. Follow the <a href="/zh/v2.0-v2.4/explanations/integrations-in-rancher/notifiers">instructions</a> to add a notifier. If you  already have notifiers, you can add them to the notification by clicking the <strong>Add Recipient</strong> button.</p><blockquote><p><strong>Note:</strong> Notifiers are configured at a cluster level and require a different level of permissions.</p></blockquote></li><li><p>For each recipient, select which notifier type from the dropdown. Based on the type of notifier, you can use the default recipient or override the recipient with a different one. For example, if you have a notifier for <em>Slack</em>, you can update which channel to send the notification to. You can add more notifiers by clicking <strong>Add Recipient</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-notifications-by-yaml">Configuring Notifications by YAML<a href="#configuring-notifications-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><em>Available as of v2.2.0</em></p><p>In the <code>notification</code> section, you will provide the following information:</p><ul><li><strong>Recipients:</strong> This will be the list of notifiers/recipients that will receive the notification.<ul><li><strong>Notifier:</strong> The ID of the notifier. This can be found by finding the notifier and selecting <strong>View in API</strong> to get the ID.</li><li><strong>Recipient:</strong> Depending on the type of the notifier, the &quot;default recipient&quot; can be used or you can override this with a different recipient. For example, when configuring a slack notifier, you select a channel as your default recipient, but if you wanted to send notifications to a different channel, you can select a different recipient.</li></ul></li><li><strong>Condition:</strong> Select which conditions of when you want the notification to be sent.</li><li><strong>Message (Optional):</strong> If you want to change the default notification message, you can edit this in the yaml. Note: This option is not available in the UI.</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">notification</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">recipients</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Recipient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">recipient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#mychannel&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ID of Notifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">notifier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;c-wdcsr:n-c9pg7&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">recipient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">notifier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;c-wdcsr:n-lkrhd&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Select which statuses you want the notification to be sent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Failed&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Success&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Changed&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Ability to override the default message (Optional)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-message&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="triggers-and-trigger-rules">Triggers and Trigger Rules<a href="#triggers-and-trigger-rules" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>After you configure a pipeline, you can trigger it using different methods:</p><ul><li><p><strong>Manually:</strong></p><p>  After you configure a pipeline, you can trigger a build using the latest CI definition from Rancher UI. When a pipeline execution is triggered, Rancher dynamically provisions a Kubernetes pod to run your CI tasks and then remove it upon completion.</p></li><li><p><strong>Automatically:</strong></p><p>  When you enable a repository for a pipeline, webhooks are automatically added to the version control system. When project users interact with the repo by pushing code, opening pull requests, or creating a tag, the version control system sends a webhook to Rancher Server, triggering a pipeline execution.</p><p>  To use this automation, webhook management permission is required for the repository. Therefore, when users authenticate and fetch their repositories, only those on which they have webhook management permission will be shown.</p></li></ul><p>Trigger rules can be created to have fine-grained control of pipeline executions in your pipeline configuration. Trigger rules come in two types:</p><ul><li><p><strong>Run this when:</strong> This type of rule starts the pipeline, stage, or step when a trigger explicitly occurs.</p></li><li><p><strong>Do Not Run this when:</strong> This type of rule skips the pipeline, stage, or step when a trigger explicitly occurs.</p></li></ul><p>If all conditions evaluate to <code>true</code>, then the pipeline/stage/step is executed. Otherwise it is skipped. When a pipeline is skipped, none of the pipeline is executed. When a stage/step is skipped, it is considered successful and follow-up stages/steps continue to run.</p><p>Wildcard character (<code>*</code>) expansion is supported in <code>branch</code> conditions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-pipeline-triggers">Configuring Pipeline Triggers<a href="#configuring-pipeline-triggers" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Global</strong> view, navigate to the project that you want to configure a pipeline trigger rule.</p></li><li><p>Click <strong>Resources &gt; Pipelines.</strong> In versions before v2.3.0, click <strong>Workloads &gt; Pipelines.</strong></p></li><li><p>From the repository for which you want to manage trigger rules, select the vertical <strong>⋮<!-- --> &gt; Edit Config</strong>.</p></li><li><p>Click on <strong>Show Advanced Options</strong>.</p></li><li><p>In the <strong>Trigger Rules</strong> section, configure rules to run or skip the pipeline.</p><ol><li><p>Click <strong>Add Rule</strong>. In the <strong>Value</strong> field, enter the name of the branch that triggers the pipeline.</p></li><li><p><strong>Optional:</strong> Add more branches that trigger a build.</p></li></ol></li><li><p>Click <strong>Done.</strong></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-stage-triggers">Configuring Stage Triggers<a href="#configuring-stage-triggers" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Global</strong> view, navigate to the project that you want to configure a stage trigger rule.</p></li><li><p>Click <strong>Resources &gt; Pipelines.</strong> In versions before v2.3.0, click <strong>Workloads &gt; Pipelines.</strong></p></li><li><p>From the repository for which you want to manage trigger rules, select the vertical <strong>⋮<!-- --> &gt; Edit Config</strong>.</p></li><li><p>Find the <strong>stage</strong> that you want to manage trigger rules, click the <strong>Edit</strong> icon for that stage.</p></li><li><p>Click <strong>Show advanced options</strong>.</p></li><li><p>In the <strong>Trigger Rules</strong> section, configure rules to run or skip the stage.</p><ol><li><p>Click <strong>Add Rule</strong>.</p></li><li><p>Choose the <strong>Type</strong> that triggers the stage and enter a value.</p><table><thead><tr><th>Type</th><th>Value</th></tr></thead><tbody><tr><td>Branch</td><td>The name of the branch that triggers the stage.</td></tr><tr><td>Event</td><td>The type of event that triggers the stage. Values are: <code>Push</code>, <code>Pull Request</code>, <code>Tag</code></td></tr></tbody></table></li></ol></li><li><p>Click <strong>Save</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-step-triggers">Configuring Step Triggers<a href="#configuring-step-triggers" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Global</strong> view, navigate to the project that you want to configure a stage trigger rule.</p></li><li><p>Click <strong>Resources &gt; Pipelines.</strong> In versions before v2.3.0, click <strong>Workloads &gt; Pipelines.</strong></p></li><li><p>From the repository for which you want to manage trigger rules, select the vertical <strong>⋮<!-- --> &gt; Edit Config</strong>.</p></li><li><p>Find the <strong>step</strong> that you want to manage trigger rules, click the <strong>Edit</strong> icon for that step.</p></li><li><p>Click <strong>Show advanced options</strong>.</p></li><li><p>In the <strong>Trigger Rules</strong> section, configure rules to run or skip the step.</p><ol><li><p>Click <strong>Add Rule</strong>.</p></li><li><p>Choose the <strong>Type</strong> that triggers the step and enter a value.</p><table><thead><tr><th>Type</th><th>Value</th></tr></thead><tbody><tr><td>Branch</td><td>The name of the branch that triggers the step.</td></tr><tr><td>Event</td><td>The type of event that triggers the step. Values are: <code>Push</code>, <code>Pull Request</code>, <code>Tag</code></td></tr></tbody></table></li></ol></li><li><p>Click <strong>Save</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-triggers-by-yaml">Configuring Triggers by YAML<a href="#configuring-triggers-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Conditions for stages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">when</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">branch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> master</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> pull_request </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Multiple steps run concurrently</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> date </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">R</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Conditions for steps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">when</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">branch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> master</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> dev </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">event</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> push</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># branch conditions for the pipeline</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">branch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">include</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> master</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> feature/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">exclude</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> dev </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variables">Environment Variables<a href="#environment-variables" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>When configuring a pipeline, certain <a href="#step-types">step types</a> allow you to use environment variables to configure the step&#x27;s script.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-environment-variables-by-ui">Configuring Environment Variables by UI<a href="#configuring-environment-variables-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Global</strong> view, navigate to the project that you want to configure pipelines.</p></li><li><p>Click <strong>Resources &gt; Pipelines.</strong> In versions before v2.3.0, click <strong>Workloads &gt; Pipelines.</strong></p></li><li><p>From the pipeline for which you want to edit build triggers, select <strong>⋮<!-- --> &gt; Edit Config</strong>.</p></li><li><p>Within one of the stages, find the <strong>step</strong> that you want to add an environment variable for, click the <strong>Edit</strong> icon.</p></li><li><p>Click <strong>Show advanced options</strong>.</p></li><li><p>Click <strong>Add Variable</strong>, and then enter a key and value in the fields that appear. Add more variables if needed.</p></li><li><p>Add your environment variable(s) into either the script or file.</p></li><li><p>Click <strong>Save</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-environment-variables-by-yaml">Configuring Environment Variables by YAML<a href="#configuring-environment-variables-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> echo $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">FIRST_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token important">&amp;&amp;</span><span class="token plain"> echo $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">SECOND_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">FIRST_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> VALUE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">SECOND_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> VALUE2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="secrets">Secrets<a href="#secrets" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>If you need to use security-sensitive information in your pipeline scripts (like a password), you can pass them in using Kubernetes <a href="/zh/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/secrets">secrets</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite">Prerequisite<a href="#prerequisite" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Create a secret in the same project as your pipeline, or explicitly in the namespace where pipeline build pods run.</p><br><blockquote><p><strong>Note:</strong> Secret injection is disabled on <a href="#triggers-and-trigger-rules">pull request events</a>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-secrets-by-ui">Configuring Secrets by UI<a href="#configuring-secrets-by-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ol><li><p>From the <strong>Global</strong> view, navigate to the project that you want to configure pipelines.</p></li><li><p>Click <strong>Resources &gt; Pipelines.</strong> In versions before v2.3.0, click <strong>Workloads &gt; Pipelines.</strong></p></li><li><p>From the pipeline for which you want to edit build triggers, select <strong>⋮<!-- --> &gt; Edit Config</strong>.</p></li><li><p>Within one of the stages, find the <strong>step</strong> that you want to use a secret for, click the <strong>Edit</strong> icon.</p></li><li><p>Click <strong>Show advanced options</strong>.</p></li><li><p>Click <strong>Add From Secret</strong>. Select the secret file that you want to use. Then choose a key. Optionally, you can enter an alias for the key.</p></li><li><p>Click <strong>Save</strong>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-secrets-by-yaml">Configuring Secrets by YAML<a href="#configuring-secrets-by-yaml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> echo $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ALIAS_ENV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># environment variables from project secrets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">envFrom</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">sourceName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">sourceKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> secret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">targetKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ALIAS_ENV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pipeline-variable-substitution-reference">Pipeline Variable Substitution Reference<a href="#pipeline-variable-substitution-reference" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>For your convenience, the following variables are available for your pipeline configuration scripts. During pipeline executions, these variables are replaced by metadata. You can reference them in the form of <code>${VAR_NAME}</code>.</p><table><thead><tr><th>Variable Name</th><th>Description</th></tr></thead><tbody><tr><td><code>CICD_GIT_REPO_NAME</code></td><td>Repository name (Github organization omitted).</td></tr><tr><td><code>CICD_GIT_URL</code></td><td>URL of the Git repository.</td></tr><tr><td><code>CICD_GIT_COMMIT</code></td><td>Git commit ID being executed.</td></tr><tr><td><code>CICD_GIT_BRANCH</code></td><td>Git branch of this event.</td></tr><tr><td><code>CICD_GIT_REF</code></td><td>Git reference specification of this event.</td></tr><tr><td><code>CICD_GIT_TAG</code></td><td>Git tag name, set on tag event.</td></tr><tr><td><code>CICD_EVENT</code></td><td>Event that triggered the build (<code>push</code>, <code>pull_request</code> or <code>tag</code>).</td></tr><tr><td><code>CICD_PIPELINE_ID</code></td><td>Rancher ID for the pipeline.</td></tr><tr><td><code>CICD_EXECUTION_SEQUENCE</code></td><td>Build number of the pipeline.</td></tr><tr><td><code>CICD_EXECUTION_ID</code></td><td>Combination of <code>{CICD_PIPELINE_ID}-{CICD_EXECUTION_SEQUENCE}</code>.</td></tr><tr><td><code>CICD_REGISTRY</code></td><td>Address for the Docker registry for the previous publish image step, available in the Kubernetes manifest file of a <code>Deploy YAML</code> step.</td></tr><tr><td><code>CICD_IMAGE</code></td><td>Name of the image built from the previous publish image step, available in the Kubernetes manifest file of a <code>Deploy YAML</code> step. It does not contain the image tag.<br><br> <a href="https://github.com/rancher/pipeline-example-go/blob/master/deployment.yaml" target="_blank" rel="noopener noreferrer">Example</a></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="global-pipeline-execution-settings">Global Pipeline Execution Settings<a href="#global-pipeline-execution-settings" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>After configuring a version control provider, there are several options that can be configured globally on how pipelines are executed in Rancher. These settings can be edited by selecting <strong>Tools &gt; Pipelines</strong> in the navigation bar. In versions before v2.2.0, you can select <strong>Resources &gt; Pipelines</strong>.</p><ul><li><a href="#executor-quota">Executor Quota</a></li><li><a href="#resource-quota-for-executors">Resource Quota for Executors</a></li><li><a href="#custom-ca">Custom CA</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executor-quota">Executor Quota<a href="#executor-quota" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Select the maximum number of pipeline executors. The <em>executor quota</em> decides how many builds can run simultaneously in the project. If the number of triggered builds exceeds the quota, subsequent builds will queue until a vacancy opens. By default, the quota is <code>2</code>. A value of <code>0</code> or less removes the quota limit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-quota-for-executors">Resource Quota for Executors<a href="#resource-quota-for-executors" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><em>Available as of v2.2.0</em></p><p>Configure compute resources for Jenkins agent containers. When a pipeline execution is triggered, a build pod is dynamically provisioned to run your CI tasks. Under the hood, A build pod consists of one Jenkins agent container and one container for each pipeline step. You can <a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/" target="_blank" rel="noopener noreferrer">manage compute resources</a> for every containers in the pod.</p><p>Edit the <strong>Memory Reservation</strong>, <strong>Memory Limit</strong>, <strong>CPU Reservation</strong> or <strong>CPU Limit</strong>, then click <strong>Update Limit and Reservation</strong>.</p><p>To configure compute resources for pipeline-step containers:</p><p>You can configure compute resources for pipeline-step containers in the <code>.rancher-pipeline.yml</code> file.</p><p>In a step, you will provide the following information:</p><ul><li><strong>CPU Reservation (<code>CpuRequest</code>)</strong>: CPU request for the container of a pipeline step.</li><li><strong>CPU Limit (<code>CpuLimit</code>)</strong>: CPU limit for the container of a pipeline step.</li><li><strong>Memory Reservation (<code>MemoryRequest</code>)</strong>: Memory request for the container of a pipeline step.</li><li><strong>Memory Limit (<code>MemoryLimit</code>)</strong>: Memory limit for the container of a pipeline step.</li></ul><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">stages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">runScriptConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">shellScript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">cpuRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">cpuLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      memoryRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">memoryLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">publishImageConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">dockerfilePath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./Dockerfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">buildContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">tag</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> repo/app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">cpuRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">cpuLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      memoryRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">memoryLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 1Gi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note:</strong> Rancher sets default compute resources for pipeline steps except for <code>Build and Publish Images</code> and <code>Run Script</code> steps. You can override the default value by specifying compute resources in the same way.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-ca">Custom CA<a href="#custom-ca" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p><em>Available as of v2.2.0</em></p><p>If you want to use a version control provider with a certificate from a custom/internal CA root, the CA root certificates need to be added as part of the version control provider configuration in order for the pipeline build pods to succeed.</p><ol><li><p>Click <strong>Edit cacerts</strong>.</p></li><li><p>Paste in the CA root certificates and click <strong>Save cacerts</strong>.</p></li></ol><p><strong>Result:</strong> Pipelines can be used and new pods will be able to work with the self-signed-certificate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="persistent-data-for-pipeline-components">Persistent Data for Pipeline Components<a href="#persistent-data-for-pipeline-components" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>The internal Docker registry and the Minio workloads use ephemeral volumes by default. This default storage works out-of-the-box and makes testing easy, but you lose the build images and build logs if the node running the Docker Registry or Minio fails. In most cases this is fine. If you want build images and logs to survive node failures, you can configure the Docker Registry and Minio to use persistent volumes.</p><p>For details on setting up persistent storage for pipelines, refer to <a href="/zh/v2.0-v2.4/reference-guides/pipelines/configure-persistent-data">this page.</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-rancher-pipelineyml">Example rancher-pipeline.yml<a href="#example-rancher-pipelineyml" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>An example pipeline configuration file is on <a href="/zh/v2.0-v2.4/reference-guides/pipelines/example-yaml">this page.</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/reference-guides/pipelines/pipeline-configuration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2023-12-06T23:35:48.000Z">2023年12月6日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/v2.0-v2.4/reference-guides/pipelines/concepts"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Concepts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/v2.0-v2.4/reference-guides/pipelines/configure-persistent-data"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Configuring Persistent Data for Pipeline Components</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-types" class="table-of-contents__link toc-highlight">Step Types</a><ul><li><a href="#configuring-steps-by-ui" class="table-of-contents__link toc-highlight">Configuring Steps By UI</a></li><li><a href="#configuring-steps-by-yaml" class="table-of-contents__link toc-highlight">Configuring Steps by YAML</a></li></ul></li><li><a href="#step-type-run-script" class="table-of-contents__link toc-highlight">Step Type: Run Script</a><ul><li><a href="#configuring-script-by-ui" class="table-of-contents__link toc-highlight">Configuring Script by UI</a></li><li><a href="#configuring-script-by-yaml" class="table-of-contents__link toc-highlight">Configuring Script by YAML</a></li></ul></li><li><a href="#step-type-build-and-publish-images" class="table-of-contents__link toc-highlight">Step Type: Build and Publish Images</a><ul><li><a href="#configuring-building-and-publishing-images-by-ui" class="table-of-contents__link toc-highlight">Configuring Building and Publishing Images by UI</a></li><li><a href="#configuring-building-and-publishing-images-by-yaml" class="table-of-contents__link toc-highlight">Configuring Building and Publishing Images by YAML</a></li></ul></li><li><a href="#step-type-publish-catalog-template" class="table-of-contents__link toc-highlight">Step Type: Publish Catalog Template</a><ul><li><a href="#configuring-publishing-a-catalog-template-by-ui" class="table-of-contents__link toc-highlight">Configuring Publishing a Catalog Template by UI</a></li><li><a href="#configuring-publishing-a-catalog-template-by-yaml" class="table-of-contents__link toc-highlight">Configuring Publishing a Catalog Template by YAML</a></li></ul></li><li><a href="#step-type-deploy-yaml" class="table-of-contents__link toc-highlight">Step Type: Deploy YAML</a><ul><li><a href="#configure-deploying-yaml-by-ui" class="table-of-contents__link toc-highlight">Configure Deploying YAML by UI</a></li><li><a href="#configure-deploying-yaml-by-yaml" class="table-of-contents__link toc-highlight">Configure Deploying YAML by YAML</a></li></ul></li><li><a href="#step-type-deploy-catalog-app" class="table-of-contents__link toc-highlight">Step Type :Deploy Catalog App</a><ul><li><a href="#configure-deploying-catalog-app-by-ui" class="table-of-contents__link toc-highlight">Configure Deploying Catalog App by UI</a></li><li><a href="#configure-deploying-catalog-app-by-yaml" class="table-of-contents__link toc-highlight">Configure Deploying Catalog App by YAML</a></li></ul></li><li><a href="#timeouts" class="table-of-contents__link toc-highlight">Timeouts</a><ul><li><a href="#configuring-timeouts-by-ui" class="table-of-contents__link toc-highlight">Configuring Timeouts by UI</a></li><li><a href="#configuring-timeouts-by-yaml" class="table-of-contents__link toc-highlight">Configuring Timeouts by YAML</a></li></ul></li><li><a href="#notifications" class="table-of-contents__link toc-highlight">Notifications</a><ul><li><a href="#configuring-notifications-by-ui" class="table-of-contents__link toc-highlight">Configuring Notifications by UI</a></li><li><a href="#configuring-notifications-by-yaml" class="table-of-contents__link toc-highlight">Configuring Notifications by YAML</a></li></ul></li><li><a href="#triggers-and-trigger-rules" class="table-of-contents__link toc-highlight">Triggers and Trigger Rules</a><ul><li><a href="#configuring-pipeline-triggers" class="table-of-contents__link toc-highlight">Configuring Pipeline Triggers</a></li><li><a href="#configuring-stage-triggers" class="table-of-contents__link toc-highlight">Configuring Stage Triggers</a></li><li><a href="#configuring-step-triggers" class="table-of-contents__link toc-highlight">Configuring Step Triggers</a></li><li><a href="#configuring-triggers-by-yaml" class="table-of-contents__link toc-highlight">Configuring Triggers by YAML</a></li></ul></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment Variables</a><ul><li><a href="#configuring-environment-variables-by-ui" class="table-of-contents__link toc-highlight">Configuring Environment Variables by UI</a></li><li><a href="#configuring-environment-variables-by-yaml" class="table-of-contents__link toc-highlight">Configuring Environment Variables by YAML</a></li></ul></li><li><a href="#secrets" class="table-of-contents__link toc-highlight">Secrets</a><ul><li><a href="#prerequisite" class="table-of-contents__link toc-highlight">Prerequisite</a></li><li><a href="#configuring-secrets-by-ui" class="table-of-contents__link toc-highlight">Configuring Secrets by UI</a></li><li><a href="#configuring-secrets-by-yaml" class="table-of-contents__link toc-highlight">Configuring Secrets by YAML</a></li></ul></li><li><a href="#pipeline-variable-substitution-reference" class="table-of-contents__link toc-highlight">Pipeline Variable Substitution Reference</a></li><li><a href="#global-pipeline-execution-settings" class="table-of-contents__link toc-highlight">Global Pipeline Execution Settings</a><ul><li><a href="#executor-quota" class="table-of-contents__link toc-highlight">Executor Quota</a></li><li><a href="#resource-quota-for-executors" class="table-of-contents__link toc-highlight">Resource Quota for Executors</a></li><li><a href="#custom-ca" class="table-of-contents__link toc-highlight">Custom CA</a></li></ul></li><li><a href="#persistent-data-for-pipeline-components" class="table-of-contents__link toc-highlight">Persistent Data for Pipeline Components</a></li><li><a href="#example-rancher-pipelineyml" class="table-of-contents__link toc-highlight">Example rancher-pipeline.yml</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.774ea973.js"></script>
<script src="/zh/assets/js/main.076ccf8a.js"></script>
</body>
</html>