<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.0-2.4 plugin-docs plugin-id-default docs-doc-id-getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Amazon NLB | Rancher</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="2.0-2.4"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" name="docsearch:version" content="2.0-2.4"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.0-2.4"><meta data-rh="true" property="og:title" content="Amazon NLB | Rancher"><meta data-rh="true" name="description" content="Objectives"><meta data-rh="true" property="og:description" content="Objectives"><link data-rh="true" rel="icon" href="/zh/img/favicon.png"><link data-rh="true" rel="canonical" href="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" hreflang="en"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Rancher" href="/zh/opensearch.xml">



<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/zh/assets/css/styles.96d619f1.css">
<link rel="preload" href="/zh/assets/js/runtime~main.c0603da3.js" as="script">
<link rel="preload" href="/zh/assets/js/main.a0c5664c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/v2.0-v2.4">v2.0-v2.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/">Latest</a></li><li><a class="dropdown__link" href="/zh/v2.8">v2.8</a></li><li><a class="dropdown__link" href="/zh/v2.7">v2.7</a></li><li><a class="dropdown__link" href="/zh/v2.6">v2.6</a></li><li><a class="dropdown__link" href="/zh/v2.5">v2.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/zh/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher__desktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.0-v2.4">Rancher 2.0-2.4</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/zh/v2.0-v2.4/getting-started">Getting Started</a><button aria-label="打开/收起侧边栏菜单「Getting Started」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/introduction">Introduction</a><button aria-label="打开/收起侧边栏菜单「Introduction」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/quick-start-guides">Quick Start Guides</a><button aria-label="打开/收起侧边栏菜单「Quick Start Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade">Installation and Upgrade</a><button aria-label="打开/收起侧边栏菜单「Installation and Upgrade」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/installation-requirements">Installation Requirements</a><button aria-label="打开/收起侧边栏菜单「Installation Requirements」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster">Install/Upgrade on a Kubernetes Cluster</a><button aria-label="打开/收起侧边栏菜单「Install/Upgrade on a Kubernetes Cluster」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/other-installation-methods/air-gapped-helm-cli-install/other-installation-methods">Other Installation Methods</a><button aria-label="打开/收起侧边栏菜单「Other Installation Methods」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/resources">Resources</a><button aria-label="打开/收起侧边栏菜单「Resources」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes">Upgrading and Rolling Back Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/upgrade-kubernetes-without-upgrading-rancher">Upgrading Kubernetes without Upgrading Rancher</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options">Advanced Options</a><button aria-label="打开/收起侧边栏菜单「Advanced Options」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/enable-experimental-features">Enabling Experimental Features</a><button aria-label="打开/收起侧边栏菜单「Enabling Experimental Features」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2">Advanced Use Cases</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2">Kubernetes Installation Using Helm 2</a><button aria-label="打开/收起侧边栏菜单「Kubernetes Installation Using Helm 2」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb">Create Nodes and Load Balancer</a><button aria-label="打开/收起侧边栏菜单「Create Nodes and Load Balancer」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-7 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nginx">NGINX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-7 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb">Amazon NLB</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/kubernetes-rke">Install Kubernetes with RKE</a><button aria-label="打开/收起侧边栏菜单「Install Kubernetes with RKE」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/helm-init">Initialize Helm: Install the Tiller Service</a><button aria-label="打开/收起侧边栏菜单「Initialize Helm: Install the Tiller Service」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/helm-rancher">Install Rancher</a><button aria-label="打开/收起侧边栏菜单「Install Rancher」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-6 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/rke-add-on">RKE Add-On Install</a><button aria-label="打开/收起侧边栏菜单「RKE Add-On Install」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/air-gap-helm2">Installing Rancher in an Air Gapped Environment with Helm 2</a><button aria-label="打开/收起侧边栏菜单「Installing Rancher in an Air Gapped Environment with Helm 2」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/open-ports-with-firewalld">Opening Ports with firewalld</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/tune-etcd-for-large-installs">Tuning etcd for Large Installations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/enable-api-audit-log">Enabling the API Audit Log to Record System Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/cluster-yml-templates">cluster.yml Templates for RKE add-on installs</a><button aria-label="打开/收起侧边栏菜单「cluster.yml Templates for RKE add-on installs」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/configure-layer-7-nginx-load-balancer">Docker Install with TLS Termination at Layer-7 NGINX Load Balancer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/rke-add-on">RKE Add-On</a><button aria-label="打开/收起侧边栏菜单「RKE Add-On」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/how-to-guides">How-to Guides</a><button aria-label="打开/收起侧边栏菜单「How-to Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/reference-guides">Reference Guides</a><button aria-label="打开/收起侧边栏菜单「Reference Guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/explanations">Explanations</a><button aria-label="打开/收起侧边栏菜单「Explanations」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/faq">FAQ</a><button aria-label="打开/收起侧边栏菜单「FAQ」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/zh/v2.0-v2.4/troubleshooting">Troubleshooting</a><button aria-label="打开/收起侧边栏菜单「Troubleshooting」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.0-v2.4/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Rancher<!-- --> <b>v2.0-v2.4</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅<b><a href="/zh/">最新版本</a></b> (<!-- -->Latest<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade"><span itemprop="name">Installation and Upgrade</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options"><span itemprop="name">Advanced Options</span></a><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Use Cases</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2"><span itemprop="name">Kubernetes Installation Using Helm 2</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb"><span itemprop="name">Create Nodes and Load Balancer</span></a><meta itemprop="position" content="6"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Amazon NLB</span><meta itemprop="position" content="7"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v2.0-v2.4</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Amazon NLB</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a href="#objectives" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Configuring an Amazon NLB is a multistage process. We&#x27;ve broken it down into multiple tasks so that it&#x27;s easy to follow.</p><ol><li><p><a href="#create-target-groups">Create Target Groups</a></p><p>Begin by creating two target groups for the <strong>TCP</strong> protocol, one regarding TCP port 443 and one regarding TCP port 80 (providing redirect to TCP port 443). You&#x27;ll add your Linux nodes to these groups.</p></li><li><p><a href="#register-targets">Register Targets</a></p><p>Add your Linux nodes to the target groups.</p></li><li><p><a href="#create-your-nlb">Create Your NLB</a></p><p>Use Amazon&#x27;s Wizard to create an Network Load Balancer. As part of this process, you&#x27;ll add the target groups you created in <strong>1. Create Target Groups</strong>.</p></li></ol><blockquote><p><strong>Note:</strong> Rancher only supports using the Amazon NLB when terminating traffic in <code>tcp</code> mode for port 443 rather than <code>tls</code> mode. This is due to the fact that the NLB does not inject the correct headers into requests when terminated at the NLB. This means that if you want to use certificates managed by the Amazon Certificate Manager (ACM), you should use an ELB or ALB.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-target-groups">Create Target Groups<a href="#create-target-groups" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Your first NLB configuration step is to create two target groups. Technically, only port 443 is needed to access Rancher, but its convenient to add a listener for port 80 which will be redirected to port 443 automatically. The NGINX ingress controller on the nodes will make sure that port 80 gets redirected to port 443.</p><p>Log into the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon AWS Console</a> to get started, make sure to select the <strong>Region</strong> where your EC2 instances (Linux nodes) are created.</p><p>The Target Groups configuration resides in the <strong>Load Balancing</strong> section of the <strong>EC2</strong> service. Select <strong>Services</strong> and choose <strong>EC2</strong>, find the section <strong>Load Balancing</strong> and open <strong>Target Groups</strong>.</p><p><img loading="lazy" src="/zh/assets/images/ec2-loadbalancing-03908e11aa18f39035bd718aaeb337e0.png" width="300" height="582" class="img_ev3q"></p><p>Click <strong>Create target group</strong> to create the first target group, regarding TCP port 443.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="target-group-tcp-port-443">Target Group (TCP port 443)<a href="#target-group-tcp-port-443" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Configure the first target group according to the table below. Screenshots of the configuration are shown just below the table.</p><table><thead><tr><th>Option</th><th>Setting</th></tr></thead><tbody><tr><td>Target Group Name</td><td><code>rancher-tcp-443</code></td></tr><tr><td>Protocol</td><td><code>TCP</code></td></tr><tr><td>Port</td><td><code>443</code></td></tr><tr><td>Target type</td><td><code>instance</code></td></tr><tr><td>VPC</td><td>Choose your VPC</td></tr><tr><td>Protocol<br>(Health Check)</td><td><code>HTTP</code></td></tr><tr><td>Path<br>(Health Check)</td><td><code>/healthz</code></td></tr><tr><td>Port (Advanced health check)</td><td><code>override</code>,<code>80</code></td></tr><tr><td>Healthy threshold (Advanced health)</td><td><code>3</code></td></tr><tr><td>Unhealthy threshold (Advanced)</td><td><code>3</code></td></tr><tr><td>Timeout (Advanced)</td><td><code>6 seconds</code></td></tr><tr><td>Interval (Advanced)</td><td><code>10 second</code></td></tr><tr><td>Success codes</td><td><code>200-399</code></td></tr></tbody></table><hr><p><strong>Screenshot Target group TCP port 443 settings</strong><br>
<img loading="lazy" src="/zh/assets/images/create-targetgroup-443-0b49466581c7f9a06f671859b3418e80.png" width="1112" height="1020" class="img_ev3q"></p><hr><p><strong>Screenshot Target group TCP port 443 Advanced settings</strong><br>
<img loading="lazy" src="/zh/assets/images/create-targetgroup-443-advanced-75286b8bc2fd57a5bca2891ab6c3d926.png" width="1120" height="548" class="img_ev3q"></p><hr><p>Click <strong>Create target group</strong> to create the second target group, regarding TCP port 80.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="target-group-tcp-port-80">Target Group (TCP port 80)<a href="#target-group-tcp-port-80" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Configure the second target group according to the table below. Screenshots of the configuration are shown just below the table.</p><table><thead><tr><th>Option</th><th>Setting</th></tr></thead><tbody><tr><td>Target Group Name</td><td><code>rancher-tcp-80</code></td></tr><tr><td>Protocol</td><td><code>TCP</code></td></tr><tr><td>Port</td><td><code>80</code></td></tr><tr><td>Target type</td><td><code>instance</code></td></tr><tr><td>VPC</td><td>Choose your VPC</td></tr><tr><td>Protocol<br>(Health Check)</td><td><code>HTTP</code></td></tr><tr><td>Path<br>(Health Check)</td><td><code>/healthz</code></td></tr><tr><td>Port (Advanced health check)</td><td><code>traffic port</code></td></tr><tr><td>Healthy threshold (Advanced health)</td><td><code>3</code></td></tr><tr><td>Unhealthy threshold (Advanced)</td><td><code>3</code></td></tr><tr><td>Timeout (Advanced)</td><td><code>6 seconds</code></td></tr><tr><td>Interval (Advanced)</td><td><code>10 second</code></td></tr><tr><td>Success codes</td><td><code>200-399</code></td></tr></tbody></table><hr><p><strong>Screenshot Target group TCP port 80 settings</strong><br>
<img loading="lazy" src="/zh/assets/images/create-targetgroup-80-6f04bcfd2f7b94842daba76e1c112db2.png" width="1102" height="1022" class="img_ev3q"></p><hr><p><strong>Screenshot Target group TCP port 80 Advanced settings</strong><br>
<img loading="lazy" src="/zh/assets/images/create-targetgroup-80-advanced-c5b620330d14e31c4446fb3492c8b343.png" width="1112" height="556" class="img_ev3q"></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-targets">Register Targets<a href="#register-targets" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Next, add your Linux nodes to both target groups.</p><p>Select the target group named <strong>rancher-tcp-443</strong>, click the tab <strong>Targets</strong> and choose <strong>Edit</strong>.</p><p><img loading="lazy" src="/zh/assets/images/edit-targetgroup-443-1143314c2ed28b80d6b1daf6068bf52e.png" width="624" height="736" class="img_ev3q"></p><p>Select the instances (Linux nodes) you want to add, and click <strong>Add to registered</strong>.</p><hr><p><strong>Screenshot Add targets to target group TCP port 443</strong><br></p><p><img loading="lazy" src="/zh/assets/images/add-targets-targetgroup-443-331e2f186b568860b9d8700b7acfc1ea.png" width="1094" height="1136" class="img_ev3q"></p><hr><p><strong>Screenshot Added targets to target group TCP port 443</strong><br></p><p><img loading="lazy" src="/zh/assets/images/added-targets-targetgroup-443-e076e0c70c61c458767ccb7bc17e9361.png" width="1586" height="656" class="img_ev3q"></p><p>When the instances are added, click <strong>Save</strong> on the bottom right of the screen.</p><p>Repeat those steps, replacing <strong>rancher-tcp-443</strong> with <strong>rancher-tcp-80</strong>. The same instances need to be added as targets to this target group.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-your-nlb">Create Your NLB<a href="#create-your-nlb" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Use Amazon&#x27;s Wizard to create an Network Load Balancer. As part of this process, you&#x27;ll add the target groups you created in <a href="#create-target-groups">Create Target Groups</a>.</p><ol><li><p>From your web browser, navigate to the <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">Amazon EC2 Console</a>.</p></li><li><p>From the navigation pane, choose <strong>LOAD BALANCING</strong> &gt; <strong>Load Balancers</strong>.</p></li><li><p>Click <strong>Create Load Balancer</strong>.</p></li><li><p>Choose <strong>Network Load Balancer</strong> and click <strong>Create</strong>.</p></li><li><p>Complete the <strong>Step 1: Configure Load Balancer</strong> form.</p><ul><li><p><strong>Basic Configuration</strong></p><ul><li><p>Name: <code>rancher</code></p></li><li><p>Scheme: <code>internal</code> or <code>internet-facing</code></p><p>The Scheme that you choose for your NLB is dependent on the configuration of your instances/VPC. If your instances do not have public IPs associated with them, or you will only be accessing Rancher internally, you should set your NLB Scheme to <code>internal</code> rather than <code>internet-facing</code>.</p></li></ul></li><li><p><strong>Listeners</strong></p><p>  Add the <strong>Load Balancer Protocols</strong> and <strong>Load Balancer Ports</strong> below.</p><ul><li><code>TCP</code>: <code>443</code></li></ul></li><li><p><strong>Availability Zones</strong></p><ul><li>Select Your <strong>VPC</strong> and <strong>Availability Zones</strong>.</li></ul></li></ul></li><li><p>Complete the <strong>Step 2: Configure Routing</strong> form.</p><ul><li><p>From the <strong>Target Group</strong> drop-down, choose <strong>Existing target group</strong>.</p></li><li><p>From the <strong>Name</strong> drop-down, choose <code>rancher-tcp-443</code>.</p></li><li><p>Open <strong>Advanced health check settings</strong>, and configure <strong>Interval</strong> to <code>10 seconds</code>.</p></li></ul></li><li><p>Complete <strong>Step 3: Register Targets</strong>. Since you registered your targets earlier, all you have to do is click <strong>Next: Review</strong>.</p></li><li><p>Complete <strong>Step 4: Review</strong>. Look over the load balancer details and click <strong>Create</strong> when you&#x27;re satisfied.</p></li><li><p>After AWS creates the NLB, click <strong>Close</strong>.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-listener-to-nlb-for-tcp-port-80">Add listener to NLB for TCP port 80<a href="#add-listener-to-nlb-for-tcp-port-80" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><ol><li><p>Select your newly created NLB and select the <strong>Listeners</strong> tab.</p></li><li><p>Click <strong>Add listener</strong>.</p></li><li><p>Use <code>TCP</code>:<code>80</code> as <strong>Protocol</strong> : <strong>Port</strong></p></li><li><p>Click <strong>Add action</strong> and choose <strong>Forward to...</strong></p></li><li><p>From the <strong>Forward to</strong> drop-down, choose <code>rancher-tcp-80</code>.</p></li><li><p>Click <strong>Save</strong> in the top right of the screen.</p></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.0-2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nlb.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2022-09-23T17:11:24.000Z">2022年9月23日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/create-nodes-lb/nginx"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">NGINX</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/v2.0-v2.4/getting-started/installation-and-upgrade/advanced-options/advanced-use-cases/helm2/kubernetes-rke"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">2. Install Kubernetes with RKE</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li><li><a href="#create-target-groups" class="table-of-contents__link toc-highlight">Create Target Groups</a><ul><li><a href="#target-group-tcp-port-443" class="table-of-contents__link toc-highlight">Target Group (TCP port 443)</a></li><li><a href="#target-group-tcp-port-80" class="table-of-contents__link toc-highlight">Target Group (TCP port 80)</a></li></ul></li><li><a href="#register-targets" class="table-of-contents__link toc-highlight">Register Targets</a></li><li><a href="#create-your-nlb" class="table-of-contents__link toc-highlight">Create Your NLB</a></li><li><a href="#add-listener-to-nlb-for-tcp-port-80" class="table-of-contents__link toc-highlight">Add listener to NLB for TCP port 80</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.c0603da3.js"></script>
<script src="/zh/assets/js/main.a0c5664c.js"></script>
</body>
</html>