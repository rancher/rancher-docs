<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.6 plugin-docs plugin-id-default docs-doc-id-how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/backup-restore-and-disaster-recovery" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Backups and Disaster Recovery | Rancher</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ranchermanager.docs.rancher.com/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="2.6"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.6"><meta data-rh="true" name="docsearch:version" content="2.6"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.6"><meta data-rh="true" property="og:title" content="Backups and Disaster Recovery | Rancher"><meta data-rh="true" name="description" content="In this section, you&#x27;ll learn how to create backups of Rancher, how to restore Rancher from backup, and how to migrate Rancher to a new Kubernetes cluster."><meta data-rh="true" property="og:description" content="In this section, you&#x27;ll learn how to create backups of Rancher, how to restore Rancher from backup, and how to migrate Rancher to a new Kubernetes cluster."><meta data-rh="true" name="keywords" content="rancher v2.6 backup restore,rancher v2.6 backup and restore,backup restore rancher v2.6,backup and restore rancher v2.6"><link data-rh="true" rel="icon" href="/zh/img/favicon.png"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery" hreflang="en"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Rancher" href="/zh/opensearch.xml">



<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/zh/assets/css/styles.96d619f1.css">
<link rel="preload" href="/zh/assets/js/runtime~main.c0603da3.js" as="script">
<link rel="preload" href="/zh/assets/js/main.a0c5664c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/v2.6">v2.6</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">Latest</a></li><li><a class="dropdown__link" href="/zh/v2.8/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">v2.8</a></li><li><a class="dropdown__link" href="/zh/v2.7/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">v2.7</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">v2.6</a></li><li><a class="dropdown__link" href="/zh/v2.5/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">v2.5</a></li><li><a class="dropdown__link" href="/zh/v2.0-v2.4/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/zh/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">简体中文</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher__desktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.6">什么是 Rancher？</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v2.6/getting-started/overview">开始使用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/v2.6/how-to-guides/new-user-guides">操作指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides">新用户指南</a><button aria-label="打开/收起侧边栏菜单「新用户指南」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration">身份验证、权限和全局配置</a><button aria-label="打开/收起侧边栏菜单「身份验证、权限和全局配置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/manage-clusters">Cluster Administration</a><button aria-label="打开/收起侧边栏菜单「Cluster Administration」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/kubernetes-cluster-setup">Kubernetes 集群设置</a><button aria-label="打开/收起侧边栏菜单「Kubernetes 集群设置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/infrastructure-setup">基础设施设置</a><button aria-label="打开/收起侧边栏菜单「基础设施设置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup">Rancher 设置中的 Kubernetes 集群</a><button aria-label="打开/收起侧边栏菜单「Rancher 设置中的 Kubernetes 集群」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/launch-kubernetes-with-rancher">Launching Kubernetes with Rancher</a><button aria-label="打开/收起侧边栏菜单「Launching Kubernetes with Rancher」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/kubernetes-resources-setup">Kubernetes 资源设置</a><button aria-label="打开/收起侧边栏菜单「Kubernetes 资源设置」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/helm-charts-in-rancher">Helm Charts and Apps</a><button aria-label="打开/收起侧边栏菜单「Helm Charts and Apps」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/deploy-apps-across-clusters">Deploying Apps Across Clusters</a><button aria-label="打开/收起侧边栏菜单「Deploying Apps Across Clusters」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">备份、还原和灾难恢复</a><button aria-label="打开/收起侧边栏菜单「备份、还原和灾难恢复」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-restore-usage-guide">备份恢复使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-rancher">备份 Rancher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/restore-rancher">还原 Rancher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/migrate-rancher-to-new-cluster">将 Rancher 迁移到新集群</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-docker-installed-rancher">备份 Docker 安装的 Rancher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/restore-docker-installed-rancher">恢复备份 - Docker 安装</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-rancher-launched-kubernetes-clusters">备份集群</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/restore-rancher-launched-kubernetes-clusters-from-backup">使用备份恢复集群</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/add-users-to-projects">添加项目成员</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/v2.6/how-to-guides/new-user-guides/manage-namespaces">命名空间</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/zh/v2.6/how-to-guides/advanced-user-guides">高级用户指南</a><button aria-label="打开/收起侧边栏菜单「高级用户指南」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v2.6/reference-guides/best-practices">参考指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v2.6/integrations-in-rancher/cloud-marketplace">Rancher 中的集成</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v2.6/faq/general-faq">常见问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/v2.6/troubleshooting/general-troubleshooting">故障排除</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/v2.6/contribute-to-rancher">参与 Rancher 社区贡献</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">操作指南</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/v2.6/how-to-guides/new-user-guides"><span itemprop="name">新用户指南</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">备份、还原和灾难恢复</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：v2.6</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Backups and Disaster Recovery</h1></header><p>In this section, you&#x27;ll learn how to create backups of Rancher, how to restore Rancher from backup, and how to migrate Rancher to a new Kubernetes cluster.</p><p>The <code>rancher-backup</code> operator is used to backup and restore Rancher on any Kubernetes cluster. This application is a Helm chart, and it can be deployed through the Rancher <strong>Apps &amp; Marketplace</strong> (Rancher before v2.6.5) or <strong>Apps</strong> (Rancher v2.6.5+) page, or by using the Helm CLI. The <code>rancher-backup</code> Helm chart is <a href="https://github.com/rancher/charts/tree/release-v2.6/charts/rancher-backup" target="_blank" rel="noopener noreferrer">here.</a></p><p>The backup-restore operator needs to be installed in the local cluster, and only backs up the Rancher app. The backup and restore operations are performed only in the local Kubernetes cluster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="backup-and-restore-for-rancher-installed-with-docker">Backup and Restore for Rancher installed with Docker<a href="#backup-and-restore-for-rancher-installed-with-docker" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>For Rancher installed with Docker, refer to <a href="/zh/v2.6/how-to-guides/new-user-guides/back-up-docker-installed-rancher.md">this page</a> to perform backups and <a href="/zh/v2.6/how-to-guides/new-user-guides/restore-docker-installed-rancher.md">this page</a> to perform restores.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-backups-and-restores-work">How Backups and Restores Work<a href="#how-backups-and-restores-work" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>The <code>rancher-backup</code> operator introduces three custom resources: Backups, Restores, and ResourceSets. The following cluster-scoped custom resource definitions are added to the cluster:</p><ul><li><code>backups.resources.cattle.io</code></li><li><code>resourcesets.resources.cattle.io</code></li><li><code>restores.resources.cattle.io</code></li></ul><p>The ResourceSet defines which Kubernetes resources need to be backed up. The ResourceSet is not available to be configured in the Rancher UI because the values required to back up Rancher are predefined. This ResourceSet should not be modified.</p><p>When a Backup custom resource is created, the <code>rancher-backup</code> operator calls the <code>kube-apiserver</code> to get the resources in the ResourceSet (specifically, the predefined <code>rancher-resource-set</code>) that the Backup custom resource refers to.</p><p>The operator then creates the backup file in the .tar.gz format and stores it in the location configured in the Backup resource.</p><p>When a Restore custom resource is created, the operator accesses the backup .tar.gz file specified by the Restore, and restores the application from that file.</p><p>The Backup and Restore custom resources can be created in the Rancher UI, or by using <code>kubectl apply</code>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>Refer <a href="/zh/v2.6/how-to-guides/new-user-guides/migrate-rancher-to-new-cluster.md#2-restore-from-backup-using-a-restore-custom-resource">here</a> for help on restoring an existing backup file into a v1.22 cluster in Rancher v2.6.3.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-rancher-backup-operator">Installing the rancher-backup Operator<a href="#installing-the-rancher-backup-operator" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>The <code>rancher-backup</code> operator can be installed from the Rancher UI, or with the Helm CLI. In both cases, the <code>rancher-backup</code> Helm chart is installed on the Kubernetes cluster running the Rancher server. It is a cluster-admin only feature and available only for the <strong>local</strong> cluster.  (<em>If you do not see <code>rancher-backup</code> in the Rancher UI, you may have selected the wrong cluster.</em>)</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>备注</div><div class="admonitionContent_S0QG"><p>There is a known issue in Fleet that occurs after performing a restoration using the backup-restore-operator: Secrets used for clientSecretName and helmSecretName are not included in Fleet gitrepos. Refer <a href="/zh/v2.6/integrations-in-rancher/fleet-gitops-at-scale#troubleshooting">here</a> for a workaround.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-rancher-backup-with-the-rancher-ui">Installing rancher-backup with the Rancher UI<a href="#installing-rancher-backup-with-the-rancher-ui" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Rancher v2.6.5+</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Rancher before v2.6.5</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><ol><li>In the upper left corner, click <strong>☰ &gt; Cluster Management</strong>.</li><li>On the <strong>Clusters</strong> page, go to the <code>local</code> cluster and click <strong>Explore</strong>.</li><li>In the left navigation bar, <strong>Apps &gt; Charts</strong>.</li><li>Click <strong>Rancher Backups</strong>.</li><li>Click <strong>Install</strong>.</li><li>Optional: Configure the default storage location. For help, refer to the <a href="/zh/reference-guides/backup-restore-configuration/storage-configuration.md">configuration section.</a></li><li>Click <strong>Install</strong>.</li></ol></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><ol><li>In the upper left corner, click <strong>☰ &gt; Cluster Management</strong>.</li><li>On the <strong>Clusters</strong> page, go to the <code>local</code> cluster and click <strong>Explore</strong>.</li><li>In the left navigation bar, <strong>Apps &amp; Marketplace &gt; Charts</strong>.</li><li>Click <strong>Rancher Backups</strong>.</li><li>Click <strong>Install</strong>.</li><li>Optional: Configure the default storage location. For help, refer to the <a href="/zh/reference-guides/backup-restore-configuration/storage-configuration.md">configuration section.</a></li><li>Click <strong>Install</strong>.</li></ol></div></div></div><p><strong>Result:</strong> The <code>rancher-backup</code> operator is installed.</p><p>From the <strong>Cluster Dashboard,</strong> you can see the <code>rancher-backup</code> operator listed under <strong>Deployments</strong>.</p><p>To configure the backup app in Rancher, go to the left navigation menu and click <strong>Rancher Backups</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rbac">RBAC<a href="#rbac" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Only the rancher admins and the local cluster’s cluster-owner can:</p><ul><li>Install the Chart</li><li>See the navigation links for Backup and Restore CRDs</li><li>Perform a backup or restore by creating a Backup CR and Restore CR respectively</li><li>List backups/restores performed so far</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="backing-up-rancher">Backing up Rancher<a href="#backing-up-rancher" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>A backup is performed by creating a Backup custom resource. For a tutorial, refer to <a href="/zh/v2.6/how-to-guides/new-user-guides/back-up-rancher.md">this page.</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="restoring-rancher">Restoring Rancher<a href="#restoring-rancher" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>A restore is performed by creating a Restore custom resource. For a tutorial, refer to <a href="/zh/v2.6/how-to-guides/new-user-guides/restore-rancher.md">this page.</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-rancher-to-a-new-cluster">Migrating Rancher to a New Cluster<a href="#migrating-rancher-to-a-new-cluster" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>A migration is performed by following <a href="/zh/v2.6/how-to-guides/new-user-guides/migrate-rancher-to-new-cluster.md">these steps.</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="default-storage-location-configuration">Default Storage Location Configuration<a href="#default-storage-location-configuration" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Configure a storage location where all backups are saved by default. You will have the option to override this with each backup, but will be limited to using an S3-compatible or Minio object store.</p><p>For information on configuring these options, refer to <a href="/zh/reference-guides/backup-restore-configuration/storage-configuration.md">this page.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-valuesyaml-for-the-rancher-backup-helm-chart">Example values.yaml for the rancher-backup Helm Chart<a href="#example-valuesyaml-for-the-rancher-backup-helm-chart" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>The example <a href="/zh/reference-guides/backup-restore-configuration/storage-configuration.md#example-valuesyaml-for-the-rancher-backup-helm-chart">values.yaml file</a> can be used to configure the <code>rancher-backup</code> operator when the Helm CLI is used to install it.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/backup-restore-and-disaster-recovery.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2024-01-29T18:07:22.000Z">2024年1月29日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/v2.6/how-to-guides/new-user-guides/deploy-apps-across-clusters/multi-cluster-apps"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">多集群应用</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/v2.6/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-restore-usage-guide"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">备份恢复使用指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#backup-and-restore-for-rancher-installed-with-docker" class="table-of-contents__link toc-highlight">Backup and Restore for Rancher installed with Docker</a></li><li><a href="#how-backups-and-restores-work" class="table-of-contents__link toc-highlight">How Backups and Restores Work</a></li><li><a href="#installing-the-rancher-backup-operator" class="table-of-contents__link toc-highlight">Installing the rancher-backup Operator</a><ul><li><a href="#installing-rancher-backup-with-the-rancher-ui" class="table-of-contents__link toc-highlight">Installing rancher-backup with the Rancher UI</a></li><li><a href="#rbac" class="table-of-contents__link toc-highlight">RBAC</a></li></ul></li><li><a href="#backing-up-rancher" class="table-of-contents__link toc-highlight">Backing up Rancher</a></li><li><a href="#restoring-rancher" class="table-of-contents__link toc-highlight">Restoring Rancher</a></li><li><a href="#migrating-rancher-to-a-new-cluster" class="table-of-contents__link toc-highlight">Migrating Rancher to a New Cluster</a></li><li><a href="#default-storage-location-configuration" class="table-of-contents__link toc-highlight">Default Storage Location Configuration</a><ul><li><a href="#example-valuesyaml-for-the-rancher-backup-helm-chart" class="table-of-contents__link toc-highlight">Example values.yaml for the rancher-backup Helm Chart</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.c0603da3.js"></script>
<script src="/zh/assets/js/main.a0c5664c.js"></script>
</body>
</html>