<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-2.7 plugin-docs plugin-id-default docs-doc-id-how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Testing HPAs with kubectl | Rancher</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ranchermanager.docs.rancher.com/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="2.7"><meta data-rh="true" name="docusaurus_tag" content="docs-default-2.7"><meta data-rh="true" name="docsearch:version" content="2.7"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-2.7"><meta data-rh="true" property="og:title" content="Testing HPAs with kubectl | Rancher"><meta data-rh="true" name="description" content="This document describes how to check the status of your HPAs after scaling them up or down with your load testing tool. For information on how to check the status from the Rancher UI (at least version 2.3.x), refer to Managing HPAs with the Rancher UI."><meta data-rh="true" property="og:description" content="This document describes how to check the status of your HPAs after scaling them up or down with your load testing tool. For information on how to check the status from the Rancher UI (at least version 2.3.x), refer to Managing HPAs with the Rancher UI."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" hreflang="en"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/zh/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ranchermanager.docs.rancher.com/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://30NEY6C9UY-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>



<link rel="search" type="application/opensearchdescription+xml" title="Rancher" href="/opensearch.xml">



<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0f98beb0-fc4c-417d-a42e-564e2cae42d2" async></script>
<script src="/scripts/optanonwrapper.js" async></script><link rel="stylesheet" href="/assets/css/styles.b83e5a9c.css">
<link rel="preload" href="/assets/js/runtime~main.ebecfb4e.js" as="script">
<link rel="preload" href="/assets/js/main.2c620d99.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/rancher-logo-horiz-color.svg" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/v2.7">v2.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">Latest</a></li><li><a class="dropdown__link" href="/v2.8/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">v2.8</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">v2.7</a></li><li><a class="dropdown__link" href="/v2.6/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">v2.6</a></li><li><a class="dropdown__link" href="/v2.5/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">v2.5</a></li><li><a class="dropdown__link" href="/v2.0-v2.4/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">v2.0-v2.4</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rancher" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rancher-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher__desktop">Rancher Desktop<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.7">What is Rancher?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.7/getting-started/overview">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/v2.7/how-to-guides/new-user-guides/new-user-guides">How-to Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/new-user-guides">New User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;New User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration">Authentication, Permissions, and Global Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication, Permissions, and Global Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/manage-clusters">Cluster Administration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cluster Administration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-cluster-setup">Setting up a Kubernetes Cluster for Rancher Server</a><button aria-label="Toggle the collapsible sidebar category &#x27;Setting up a Kubernetes Cluster for Rancher Server&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/infrastructure-setup">Infrastructure Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Infrastructure Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup">Kubernetes Clusters in Rancher Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Clusters in Rancher Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/launch-kubernetes-with-rancher">Launching Kubernetes with Rancher</a><button aria-label="Toggle the collapsible sidebar category &#x27;Launching Kubernetes with Rancher&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup">Kubernetes Resources Setup</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes Resources Setup&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/workloads-and-pods">Workloads and Pods</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workloads and Pods&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler">Horizontal Pod Autoscaler</a><button aria-label="Toggle the collapsible sidebar category &#x27;Horizontal Pod Autoscaler&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/about-hpas">Background Information on HPAs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-ui">Managing HPAs with the Rancher UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-kubectl">Managing HPAs with kubectl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl">Testing HPAs with kubectl</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/load-balancer-and-ingress-controller">Load Balancer and Ingress Controller</a><button aria-label="Toggle the collapsible sidebar category &#x27;Load Balancer and Ingress Controller&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/create-services">Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/encrypt-http-communication">Encrypting HTTP Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/configmaps">ConfigMaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/kubernetes-and-docker-registries">Kubernetes Registry and Container Image Registry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/helm-charts-in-rancher">Helm Charts and Apps</a><button aria-label="Toggle the collapsible sidebar category &#x27;Helm Charts and Apps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery">Backup, Restore, and Disaster Recovery</a><button aria-label="Toggle the collapsible sidebar category &#x27;Backup, Restore, and Disaster Recovery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/add-users-to-projects">Adding Users to Projects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/v2.7/how-to-guides/new-user-guides/manage-namespaces">Namespaces</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/v2.7/how-to-guides/advanced-user-guides">Advanced User Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Advanced User Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.7/reference-guides/best-practices">Reference Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.7/integrations-in-rancher/cloud-marketplace">Integrations in Rancher</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.7/faq/general-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/v2.7/troubleshooting/general-troubleshooting">Troubleshooting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v2.7/contribute-to-rancher">Contributing to Rancher</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">How-to Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.7/how-to-guides/new-user-guides/new-user-guides"><span itemprop="name">New User Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup"><span itemprop="name">Kubernetes Resources Setup</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler"><span itemprop="name">Horizontal Pod Autoscaler</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Testing HPAs with kubectl</span><meta itemprop="position" content="5"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.7</span><div class="theme-doc-markdown markdown"><header><h1>Testing HPAs with kubectl</h1></header><p>This document describes how to check the status of your HPAs after scaling them up or down with your load testing tool. For information on how to check the status from the Rancher UI (at least version 2.3.x), refer to <a href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-kubectl">Managing HPAs with the Rancher UI</a>.</p><p>For HPA to work correctly, service deployments should have resources request definitions for containers. Follow this hello-world example to test if HPA is working correctly.</p><ol><li><p>Configure <code>kubectl</code> to connect to your Kubernetes cluster.</p></li><li><p>Copy the <code>hello-world</code> deployment manifest below.</p><details id="hello-world" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Hello World Manifest</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1beta2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    app: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      app: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  strategy:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rollingUpdate:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      maxSurge: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      maxUnavailable: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    type: RollingUpdate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        app: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - image: rancher/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        imagePullPolicy: Always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        resources:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          requests:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            cpu: 500m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            memory: 64Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - containerPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          protocol: TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      restartPolicy: Always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">---</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - port: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    targetPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    app: hello-world</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details></li><li><p>Deploy it to your cluster.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl create -f &lt;HELLO_WORLD_MANIFEST&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Copy one of the HPAs below based on the metric type you&#x27;re using:</p><details id="service-deployment-resource-metrics" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Hello World HPA: Resource Metrics</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: autoscaling/v2beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: HorizontalPodAutoscaler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  scaleTargetRef:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    apiVersion: extensions/v1beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  minReplicas: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  maxReplicas: 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  metrics:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - type: Resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: cpu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      targetAverageUtilization: 50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - type: Resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      targetAverageValue: 1000Mi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details id="service-deployment-custom-metrics" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Hello World HPA: Custom Metrics</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: autoscaling/v2beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: HorizontalPodAutoscaler</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  scaleTargetRef:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    apiVersion: extensions/v1beta1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    kind: Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  minReplicas: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  maxReplicas: 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  metrics:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - type: Resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: cpu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      targetAverageUtilization: 50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - type: Resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      targetAverageValue: 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - type: Pods</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pods:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      metricName: cpu_system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      targetAverageValue: 20m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details></li><li><p>View the HPA info and description. Confirm that metric data is shown.</p><details id="hpa-info-resource-metrics" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Resource Metrics</summary><div><div class="collapsibleContent_i85q"><ol><li>Enter the following commands.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl get hpa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME          REFERENCE                TARGETS                     MINPODS   MAXPODS   REPLICAS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world   Deployment/hello-world   1253376 / 100Mi, 0% / 50%   1         10        1          6m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CreationTimestamp:                                     Mon, 23 Jul 2018 20:21:16 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource memory on pods:                             1253376 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource cpu on pods  (as a percentage of request):  0% (0) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  AbleToScale     True    ReadyForNewScale    the last scale time was sufficiently old as to warrant a new scale</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from memory resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Events:           &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="hpa-info-custom-metrics" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Custom Metrics</summary><div><div class="collapsibleContent_i85q"><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive the output that follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CreationTimestamp:                                     Tue, 24 Jul 2018 18:36:28 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource memory on pods:                             3514368 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;cpu_system&quot; on pods:                                0 / 20m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource cpu on pods  (as a percentage of request):  0% (0) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  AbleToScale     True    ReadyForNewScale    the last scale time was sufficiently old as to warrant a new scale</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from memory resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Events:           &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details></li><li><p>Generate a load for the service to test that your pods autoscale as intended. You can use any load-testing tool (Hey, Gatling, etc.), but we&#x27;re using <a href="https://github.com/rakyll/hey" target="_blank" rel="noopener noreferrer">Hey</a>.</p></li><li><p>Test that pod autoscaling works as intended.<br><br>
<strong>To Test Autoscaling Using Resource Metrics:</strong></p><details id="observe-upscale-2-pods-cpu" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Upscale to 2 Pods: CPU Usage Up to Target</summary><div><div class="collapsibleContent_i85q"><p>  Use your load testing tool to scale up to two pods based on CPU Usage.</p><ol><li>View your HPA.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CreationTimestamp:                                     Mon, 23 Jul 2018 22:22:04 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource memory on pods:                             10928128 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  resource cpu on pods  (as a percentage of request):  56% (280m) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from cpu resource utilization (percentage of request)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Normal  SuccessfulRescale  13s   horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm you&#x27;ve scaled to two pods.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   # kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   NAME                                                     READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   hello-world-54764dfbf8-k8ph2                             1/1       Running   0          1m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   hello-world-54764dfbf8-q6l4v                             1/1       Running   0          3h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="observe-upscale-3-pods-cpu-cooldown" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Upscale to 3 pods: CPU Usage Up to Target</summary><div><div class="collapsibleContent_i85q"><p>  Use your load testing tool to upscale to 3 pods based on CPU usage with <code>horizontal-pod-autoscaler-upscale-delay</code> set to 3 minutes.</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CreationTimestamp:                                     Mon, 23 Jul 2018 22:22:04 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     resource memory on pods:                             9424896 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     resource cpu on pods  (as a percentage of request):  66% (333m) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from cpu resource utilization (percentage of request)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Normal  SuccessfulRescale  4m    horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Normal  SuccessfulRescale  16s   horizontal-pod-autoscaler  New size: 3; reason: cpu resource utilization (percentage of request) above target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm three pods are running.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div> You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NAME                                                     READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> hello-world-54764dfbf8-f46kh                             0/1       Running   0          1m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> hello-world-54764dfbf8-k8ph2                             1/1       Running   0          5m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> hello-world-54764dfbf8-q6l4v                             1/1       Running   0          3h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="observe-downscale-1-pod" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Downscale to 1 Pod: All Metrics Below Target</summary><div><div class="collapsibleContent_i85q"><p> Use your load testing to scale down to 1 pod when all metrics are below target for <code>horizontal-pod-autoscaler-downscale-delay</code> (5 minutes by default).</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CreationTimestamp:                                     Mon, 23 Jul 2018 22:22:04 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource memory on pods:                             10070016 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource cpu on pods  (as a percentage of request):  0% (0) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from memory resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  10m   horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  6m    horizontal-pod-autoscaler  New size: 3; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  1s    horizontal-pod-autoscaler  New size: 1; reason: All metrics below target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><p><strong>To Test Autoscaling Using Custom Metrics:</strong></p><details id="custom-observe-upscale-2-pods-cpu" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Upscale to 2 Pods: CPU Usage Up to Target</summary><div><div class="collapsibleContent_i85q"><p>  Use your load testing tool to upscale two pods based on CPU usage.</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  CreationTimestamp:                                     Tue, 24 Jul 2018 18:01:11 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource memory on pods:                             8159232 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;cpu_system&quot; on pods:                                7m / 20m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    resource cpu on pods  (as a percentage of request):  64% (321m) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from cpu resource utilization (percentage of request)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Normal  SuccessfulRescale  16s   horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm two pods are running.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">      NAME                           READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      hello-world-54764dfbf8-5pfdr   1/1       Running   0          3s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      hello-world-54764dfbf8-q6l82   1/1       Running   0          6h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="observe-upscale-3-pods-cpu-cooldown-2" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Upscale to 3 Pods: CPU Usage Up to Target</summary><div><div class="collapsibleContent_i85q"><p> Use your load testing tool to scale up to three pods when the cpu_system usage limit is up to target.</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CreationTimestamp:                                     Tue, 24 Jul 2018 18:01:11 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     resource memory on pods:                             8374272 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     &quot;cpu_system&quot; on pods:                                27m / 20m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     resource cpu on pods  (as a percentage of request):  71% (357m) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from cpu resource utilization (percentage of request)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Normal  SuccessfulRescale  3m    horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Normal  SuccessfulRescale  3s    horizontal-pod-autoscaler  New size: 3; reason: pods metric cpu_system above target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm three pods are running.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   # kubectl get pods</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   NAME                           READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   hello-world-54764dfbf8-5pfdr   1/1       Running   0          3m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   hello-world-54764dfbf8-m2hrl   1/1       Running   0          1s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   hello-world-54764dfbf8-q6l82   1/1       Running   0          6h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="observe-upscale-4-pods" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Upscale to 4 Pods: CPU Usage Up to Target</summary><div><div class="collapsibleContent_i85q"><p>   Use your load testing tool to upscale to four pods based on CPU usage. <code>horizontal-pod-autoscaler-upscale-delay</code> is set to three minutes by default.</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CreationTimestamp:                                     Tue, 24 Jul 2018 18:01:11 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource memory on pods:                             8374272 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;cpu_system&quot; on pods:                                27m / 20m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource cpu on pods  (as a percentage of request):  71% (357m) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from cpu resource utilization (percentage of request)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  5m    horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  3m    horizontal-pod-autoscaler  New size: 3; reason: pods metric cpu_system above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  4s    horizontal-pod-autoscaler  New size: 4; reason: cpu resource utilization (percentage of request) above target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm four pods are running.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  NAME                           READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hello-world-54764dfbf8-2p9xb   1/1       Running   0          5m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hello-world-54764dfbf8-5pfdr   1/1       Running   0          2m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hello-world-54764dfbf8-m2hrl   1/1       Running   0          1s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hello-world-54764dfbf8-q6l82   1/1       Running   0          6h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details><details id="custom-metrics-observe-downscale-1-pod" class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Downscale to 1 Pod: All Metrics Below Target</summary><div><div class="collapsibleContent_i85q"><p>  Use your load testing tool to scale down to one pod when all metrics below target for <code>horizontal-pod-autoscaler-downscale-delay</code>.</p><ol><li>Enter the following command.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># kubectl describe hpa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive similar output to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Name:                                                  hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Namespace:                                             default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Labels:                                                &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Annotations:                                           &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CreationTimestamp:                                     Tue, 24 Jul 2018 18:01:11 +0200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Reference:                                             Deployment/hello-world</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Metrics:                                               ( current / target )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource memory on pods:                             8101888 / 100Mi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;cpu_system&quot; on pods:                                8m / 20m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resource cpu on pods  (as a percentage of request):  0% (0) / 50%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Min replicas:                                          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Max replicas:                                          10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type            Status  Reason              Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----            ------  ------              -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      AbleToScale     True    SucceededRescale    the HPA controller was able to update the target scale to 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingActive   True    ValidMetricFound    the HPA was able to successfully calculate a replica count from memory resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ScalingLimited  False   DesiredWithinRange  the desired count is within the acceptable range</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Type    Reason             Age   From                       Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ----    ------             ----  ----                       -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  10m    horizontal-pod-autoscaler  New size: 2; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  8m    horizontal-pod-autoscaler  New size: 3; reason: pods metric cpu_system above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal  SuccessfulRescale  5m    horizontal-pod-autoscaler  New size: 4; reason: cpu resource utilization (percentage of request) above target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Normal   SuccessfulRescale             13s               horizontal-pod-autoscaler  New size: 1; reason: All metrics below target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>Enter the following command to confirm a single pods is running.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # kubectl get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>You should receive output similar to what follows.<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    NAME                           READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hello-world-54764dfbf8-q6l82   1/1       Running   0          6h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div></div></details></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/test-hpas-with-kubectl.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-14T20:34:59.000Z">Aug 14, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/horizontal-pod-autoscaler/manage-hpas-with-kubectl"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Managing HPAs with kubectl</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2.7/how-to-guides/new-user-guides/kubernetes-resources-setup/load-balancer-and-ingress-controller"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Load Balancer and Ingress Controller Setup within Rancher</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ebecfb4e.js"></script>
<script src="/assets/js/main.2c620d99.js"></script>
</body>
</html>