"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[9508],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=o,h=d["".concat(l,".").concat(f)]||d[f]||u[f]||i;return n?r.createElement(h,a(a({ref:t},p),{},{components:n})):r.createElement(h,a({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},18892:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const i={title:"Additional Steps for Project Network Isolation"},a=void 0,s={unversionedId:"integrations-in-rancher/istio/configuration-options/project-network-isolation",id:"integrations-in-rancher/istio/configuration-options/project-network-isolation",title:"Additional Steps for Project Network Isolation",description:"In clusters where:",source:"@site/docs/integrations-in-rancher/istio/configuration-options/project-network-isolation.md",sourceDirName:"integrations-in-rancher/istio/configuration-options",slug:"/integrations-in-rancher/istio/configuration-options/project-network-isolation",permalink:"/integrations-in-rancher/istio/configuration-options/project-network-isolation",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/docs/integrations-in-rancher/istio/configuration-options/project-network-isolation.md",tags:[],version:"current",lastUpdatedAt:1666730461,formattedLastUpdatedAt:"Oct 25, 2022",frontMatter:{title:"Additional Steps for Project Network Isolation"},sidebar:"tutorialSidebar",previous:{title:"Additional Steps for Installing Istio on RKE2 and K3s Clusters",permalink:"/integrations-in-rancher/istio/configuration-options/install-istio-on-rke2-cluster"},next:{title:"Longhorn - Cloud native distributed block storage for Kubernetes",permalink:"/integrations-in-rancher/longhorn"}},l={},c=[],p={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In clusters where:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You are using the Canal network plugin with Rancher before v2.5.8, or you are using Rancher v2.5.8+ with an any RKE network plug-in that supports the enforcement of Kubernetes network policies, such as Canal or the Cisco ACI plugin"),(0,o.kt)("li",{parentName:"ul"},"The Project Network Isolation option is enabled"),(0,o.kt)("li",{parentName:"ul"},"You install the Istio Ingress module")),(0,o.kt)("p",null,"The Istio Ingress Gateway pod won't be able to redirect ingress traffic to the workloads by default. This is because all the namespaces will be inaccessible from the namespace where Istio is installed. You have two options."),(0,o.kt)("p",null,"The first option is to add a new Network Policy in each of the namespaces where you intend to have ingress controlled by Istio. Your policy should include the following lines:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"- podSelector:\n    matchLabels:\n      app: istio-ingressgateway\n")),(0,o.kt)("p",null,"The second option is to move the ",(0,o.kt)("inlineCode",{parentName:"p"},"istio-system")," namespace to the ",(0,o.kt)("inlineCode",{parentName:"p"},"system")," project, which by default is excluded from the network isolation."))}u.isMDXComponent=!0}}]);