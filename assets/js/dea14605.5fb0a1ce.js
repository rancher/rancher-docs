"use strict";(self.webpackChunkrancher_docs=self.webpackChunkrancher_docs||[]).push([[6495],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=s(n),d=r,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},92924:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],l={title:"CLI with Rancher",description:"Interact with Rancher using command line interface (CLI) tools from your workstation.",weight:21},c=void 0,s={unversionedId:"pages-for-subheaders/cli-with-rancher",id:"version-2.5/pages-for-subheaders/cli-with-rancher",title:"CLI with Rancher",description:"Interact with Rancher using command line interface (CLI) tools from your workstation.",source:"@site/versioned_docs/version-2.5/pages-for-subheaders/cli-with-rancher.md",sourceDirName:"pages-for-subheaders",slug:"/pages-for-subheaders/cli-with-rancher",permalink:"/v2.5/pages-for-subheaders/cli-with-rancher",draft:!1,editUrl:"https://github.com/rancher/rancher-docs/edit/main/versioned_docs/version-2.5/pages-for-subheaders/cli-with-rancher.md",tags:[],version:"2.5",lastUpdatedAt:1662486037,formattedLastUpdatedAt:"9/6/2022",frontMatter:{title:"CLI with Rancher",description:"Interact with Rancher using command line interface (CLI) tools from your workstation.",weight:21},sidebar:"tutorialSidebar",previous:{title:"User Preferences",permalink:"/v2.5/reference-guides/user-settings/user-preferences"},next:{title:"rancher-cli",permalink:"/v2.5/reference-guides/cli-with-rancher/rancher-cli"}},u={},p=[{value:"Download Rancher CLI",id:"download-rancher-cli",level:3},{value:"Requirements",id:"requirements",level:3},{value:"CLI Authentication",id:"cli-authentication",level:3},{value:"Project Selection",id:"project-selection",level:3},{value:"Commands",id:"commands",level:3},{value:"Rancher CLI Help",id:"rancher-cli-help",level:3},{value:"Limitations",id:"limitations",level:3},{value:"kubectl Utility",id:"kubectl-utility",level:3},{value:"Authentication with kubectl and kubeconfig Tokens with TTL",id:"authentication-with-kubectl-and-kubeconfig-tokens-with-ttl",level:3}],h={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#rancher-cli"},"Rancher CLI"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#download-rancher-cli"},"Download Rancher CLI")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#requirements"},"Requirements")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#cli-authentication"},"CLI Authentication")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#project-selection"},"Project Selection")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#commands"},"Commands")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#rancher-cli-help"},"Rancher CLI Help")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#limitations"},"Limitations")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#kubectl"},"kubectl"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#kubectl-utility"},"kubectl Utility")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#authentication-with-kubectl-and-kubeconfig-tokens-with-ttl"},"Authentication with kubectl and kubeconfig Tokens with TTL"))))),(0,o.kt)("h1",{id:"rancher-cli"},"Rancher CLI"),(0,o.kt)("p",null,"The Rancher CLI (Command Line Interface) is a unified tool that you can use to interact with Rancher. With this tool, you can operate Rancher using a command line rather than the GUI."),(0,o.kt)("h3",{id:"download-rancher-cli"},"Download Rancher CLI"),(0,o.kt)("p",null,"The binary can be downloaded directly from the UI. The link can be found in the right hand side of the footer in the UI. We have binaries for Windows, Mac, and Linux. You can also check the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ranchcli/releases"},"releases page for our CLI")," for direct downloads of the binary."),(0,o.kt)("h3",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,"After you download the Rancher CLI, you need to make a few configurations. Rancher CLI requires:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Your Rancher Server URL, which is used to connect to Rancher Server."),(0,o.kt)("li",{parentName:"ul"},"An API Bearer Token, which is used to authenticate with Rancher. For more information about obtaining a Bearer Token, see ",(0,o.kt)("a",{parentName:"li",href:"/v2.5/reference-guides/user-settings/api-keys"},"Creating an API Key"),".")),(0,o.kt)("h3",{id:"cli-authentication"},"CLI Authentication"),(0,o.kt)("p",null,"Before you can use Rancher CLI to control your Rancher Server, you must authenticate using an API Bearer Token. Log in using the following command (replace ",(0,o.kt)("inlineCode",{parentName:"p"},"<BEARER_TOKEN>")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"<SERVER_URL>")," with your information):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./rancher login https://<SERVER_URL> --token <BEARER_TOKEN>\n")),(0,o.kt)("p",null,"If Rancher Server uses a self-signed certificate, Rancher CLI prompts you to continue with the connection."),(0,o.kt)("h3",{id:"project-selection"},"Project Selection"),(0,o.kt)("p",null,"Before you can perform any commands, you must select a Rancher project to perform those commands against. To select a ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/how-to-guides/advanced-user-guides/manage-clusters/projects-and-namespaces"},"project")," to work on, use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"./rancher context switch"),". When you enter this command, a list of available projects displays. Enter a number to choose your project."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example: ",(0,o.kt)("inlineCode",{parentName:"strong"},"./rancher context switch")," Output")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"User:rancher-cli-directory user$ ./rancher context switch\nNUMBER    CLUSTER NAME   PROJECT ID              PROJECT NAME\n1         cluster-2      c-7q96s:p-h4tmb         project-2\n2         cluster-2      c-7q96s:project-j6z6d   Default\n3         cluster-1      c-lchzv:p-xbpdt         project-1\n4         cluster-1      c-lchzv:project-s2mch   Default\nSelect a Project:\n")),(0,o.kt)("p",null,"After you enter a number, the console displays a message that you've changed projects."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"INFO[0005] Setting new context to project project-1\nINFO[0005] Saving config to /Users/markbishop/.ranchcli2.json\n")),(0,o.kt)("p",null,"Ensure you can run ",(0,o.kt)("inlineCode",{parentName:"p"},"rancher kubectl get pods")," successfully."),(0,o.kt)("h3",{id:"commands"},"Commands"),(0,o.kt)("p",null,"The following commands are available for use in Rancher CLI."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Command"),(0,o.kt)("th",{parentName:"tr",align:null},"Result"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"apps, [app]")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on catalog applications (i.e., individual ",(0,o.kt)("a",{parentName:"td",href:"https://docs.helm.sh/developing_charts/"},"Helm charts"),") or Rancher charts.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"catalog")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/pages-for-subheaders/helm-charts-in-rancher"},"catalogs"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"clusters, [cluster]")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on your ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/pages-for-subheaders/kubernetes-clusters-in-rancher-setup"},"clusters"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"context")),(0,o.kt)("td",{parentName:"tr",align:null},"Switches between Rancher ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/how-to-guides/advanced-user-guides/manage-clusters/projects-and-namespaces"},"projects"),". For an example, see ",(0,o.kt)("a",{parentName:"td",href:"#project-selection"},"Project Selection"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"inspect [OPTIONS] [RESOURCEID RESOURCENAME]")),(0,o.kt)("td",{parentName:"tr",align:null},"Displays details about ",(0,o.kt)("a",{parentName:"td",href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/#resource-types"},"Kubernetes resources")," or Rancher resources (i.e.: ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/how-to-guides/advanced-user-guides/manage-clusters/projects-and-namespaces"},"projects")," and ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/pages-for-subheaders/workloads-and-pods"},"workloads"),"). Specify resources by name or ID.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"kubectl")),(0,o.kt)("td",{parentName:"tr",align:null},"Runs ",(0,o.kt)("a",{parentName:"td",href:"https://kubernetes.io/docs/reference/kubectl/overview/#operations"},"kubectl commands"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"login, [l]")),(0,o.kt)("td",{parentName:"tr",align:null},"Logs into a Rancher Server. For an example, see ",(0,o.kt)("a",{parentName:"td",href:"#cli-authentication"},"CLI Authentication"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"namespaces, [namespace]")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on namespaces.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"nodes, [node]")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on nodes.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"projects, [project]")),(0,o.kt)("td",{parentName:"tr",align:null},"Performs operations on ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/how-to-guides/advanced-user-guides/manage-clusters/projects-and-namespaces"},"projects"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"ps")),(0,o.kt)("td",{parentName:"tr",align:null},"Displays ",(0,o.kt)("a",{parentName:"td",href:"/v2.5/pages-for-subheaders/workloads-and-pods"},"workloads")," in a project.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"settings, [setting]")),(0,o.kt)("td",{parentName:"tr",align:null},"Shows the current settings for your Rancher Server.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"ssh")),(0,o.kt)("td",{parentName:"tr",align:null},"Connects to one of your cluster nodes using the SSH protocol.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"help, [h]")),(0,o.kt)("td",{parentName:"tr",align:null},"Shows a list of commands or help for one command.")))),(0,o.kt)("h3",{id:"rancher-cli-help"},"Rancher CLI Help"),(0,o.kt)("p",null,"Once logged into Rancher Server using the CLI, enter ",(0,o.kt)("inlineCode",{parentName:"p"},"./rancher --help")," for a list of commands."),(0,o.kt)("p",null,"All commands accept the ",(0,o.kt)("inlineCode",{parentName:"p"},"--help")," flag, which documents each command's usage."),(0,o.kt)("h3",{id:"limitations"},"Limitations"),(0,o.kt)("p",null,"The Rancher CLI ",(0,o.kt)("strong",{parentName:"p"},"cannot")," be used to install ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/pages-for-subheaders/helm-charts-in-rancher"},"dashboard apps or Rancher feature charts"),"."),(0,o.kt)("h1",{id:"kubectl"},"kubectl"),(0,o.kt)("p",null,"Interact with Rancher using kubectl."),(0,o.kt)("h3",{id:"kubectl-utility"},"kubectl Utility"),(0,o.kt)("p",null,"Install the ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl")," utility. See ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/"},"install kubectl"),"."),(0,o.kt)("p",null,"Configure kubectl by visiting your cluster in the Rancher Web UI, clicking on ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubeconfig"),", copying contents, and putting them into your ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.kube/config")," file."),(0,o.kt)("p",null,"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl cluster-info")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get pods")," successfully."),(0,o.kt)("h3",{id:"authentication-with-kubectl-and-kubeconfig-tokens-with-ttl"},"Authentication with kubectl and kubeconfig Tokens with TTL"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Requirements")),(0,o.kt)("p",null,"If admins have ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/reference-guides/about-the-api/api-tokens#setting-ttl-on-kubeconfig-tokens"},"enforced TTL on kubeconfig tokens"),", the kubeconfig file requires the ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/pages-for-subheaders/cli-with-rancher"},"Rancher CLI")," to be present in your PATH when you run ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl"),". Otherwise, you\u2019ll see an error like:\n",(0,o.kt)("inlineCode",{parentName:"p"},'Unable to connect to the server: getting credentials: exec: exec: "rancher": executable file not found in $PATH'),"."),(0,o.kt)("p",null,"This feature enables kubectl to authenticate with the Rancher server and get a new kubeconfig token when required. The following auth providers are currently supported:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Local"),(0,o.kt)("li",{parentName:"ol"},"Active Directory (LDAP only)"),(0,o.kt)("li",{parentName:"ol"},"FreeIPA"),(0,o.kt)("li",{parentName:"ol"},"OpenLDAP"),(0,o.kt)("li",{parentName:"ol"},"SAML providers: Ping, Okta, ADFS, Keycloak, Shibboleth")),(0,o.kt)("p",null,"When you first run kubectl, for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get pods"),", it will ask you to pick an auth provider and log in with the Rancher server.\nThe kubeconfig token is cached in the path where you run kubectl under ",(0,o.kt)("inlineCode",{parentName:"p"},"./.cache/token"),". This token is valid until ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/reference-guides/about-the-api/api-tokens#setting-ttl-on-kubeconfig-tokens-period"},"it expires"),", or ",(0,o.kt)("a",{parentName:"p",href:"/v2.5/reference-guides/about-the-api/api-tokens#deleting-tokens"},"gets deleted from the Rancher server"),".\nUpon expiration, the next ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl get pods")," will ask you to log in with the Rancher server again."))}d.isMDXComponent=!0}}]);